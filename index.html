<!-- Modified HTML with new tab structure -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeetCode Tracker - 175 Google Interview Problems</title>
    <!-- Add Firebase and Google Auth SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <style>
        :root {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --bg-highlight: #475569;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --blue: #3b82f6;
            --blue-dark: #2563eb;
            --green: #10b981;
            --yellow: #f59e0b;
            --orange: #f97316;
            --red: #ef4444;
            --border: #475569;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.5;
            font-size: 14px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        h1 {
            font-size: 1.25rem;
            color: var(--blue);
        }

        .header-subtitle {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* New status tabs style */
        .status-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .status-tab {
            flex: 1;
            min-width: 120px;
            padding: 0.75rem;
            background-color: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 0.25rem;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s ease;
        }

        .status-tab:hover {
            background-color: var(--bg-tertiary);
        }

        .status-tab.active {
            border-color: var(--blue);
            background-color: var(--bg-tertiary);
        }

        .status-tab-title {
            font-size: 0.8rem;
            font-weight: 500;
            margin-bottom: 0.25rem;
        }

        .status-tab-count {
            font-size: 1rem;
            font-weight: bold;
        }

        .status-tab.completed .status-tab-count {
            color: var(--green);
        }

        .status-tab.review .status-tab-count {
            color: var(--orange);
        }

        .status-tab.today .status-tab-count {
            color: var(--blue);
        }

        .status-tab.pending .status-tab-count {
            color: var(--red);
        }

        /* Total progress indicator */
        .total-progress {
            display: flex;
            align-items: center;
            background-color: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 0.25rem;
            padding: 0.5rem 0.75rem;
            margin-bottom: 1rem;
            font-size: 0.8rem;
        }

        .total-progress-label {
            color: var(--text-muted);
        }

        .total-progress-value {
            margin-left: 0.5rem;
            font-weight: 500;
        }

        .tab-navigation {
            display: flex;
            border-bottom: 1px solid var(--border);
            margin-bottom: 1rem;
        }

        .tab-button {
            padding: 0.5rem 1rem;
            background: none;
            border: none;
            font-size: 0.75rem;
            color: var(--text-muted);
            cursor: pointer;
            font-weight: 500;
        }

        .tab-button.active {
            color: var(--blue);
            border-bottom: 2px solid var(--blue);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Table styles */
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.8rem;
            margin-bottom: 1rem;
        }

        th {
            text-align: left;
            padding: 0.5rem;
            background-color: var(--bg-tertiary);
            color: var(--text-secondary);
            font-weight: 500;
            border-bottom: 1px solid var(--border);
        }

        td {
            padding: 0.5rem;
            border-bottom: 1px solid var(--border);
            color: var(--text-secondary);
        }

        tr:nth-child(even) {
            background-color: var(--bg-secondary);
        }

        tr:nth-child(odd) {
            background-color: #263149;
        }

        .table-container {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 0.25rem;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem;
            background-color: var(--bg-tertiary);
            font-size: 0.75rem;
        }

        .pagination-info {
            color: var(--text-muted);
        }

        .pagination-controls {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .btn {
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            cursor: pointer;
            border: none;
        }

        .btn-primary {
            background-color: var(--blue);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--blue-dark);
        }

        .btn-secondary {
            background-color: var(--bg-tertiary);
            color: var(--text-secondary);
        }

        .btn-secondary:hover {
            background-color: var(--bg-highlight);
        }

        .btn-disabled {
            background-color: var(--bg-tertiary);
            color: var(--text-muted);
            cursor: not-allowed;
        }

        /* Filter styles */
        .filters {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            gap: 0.5rem;
        }

        .filter-group {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .search-container {
            position: relative;
        }

        .search-icon {
            position: absolute;
            left: 0.5rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-size: 0.75rem;
        }

        select, input {
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            background-color: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        input[type="search"] {
            padding-left: 1.5rem;
            width: 200px;
        }

        /* Card styles */
        .card {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 0.25rem;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .card-title {
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .problem-list {
            list-style: none;
        }

        .problem-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem;
            background-color: #263149;
            border-radius: 0.25rem;
            margin-bottom: 0.5rem;
        }

        .problem-info {
            flex: 1;
        }

        .problem-title {
            font-size: 0.75rem;
            font-weight: 500;
            margin-bottom: 0.25rem;
        }

        .problem-meta {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .problem-actions {
            display: flex;
            gap: 0.25rem;
        }

        .icon-button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 0.25rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .icon-button:hover {
            background-color: var(--bg-tertiary);
        }

        /* Progress bars */
        .progress-container {
            margin-bottom: 0.75rem;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            margin-bottom: 0.25rem;
        }

        .progress-bar {
            height: 0.375rem;
            background-color: var(--bg-tertiary);
            border-radius: 0.25rem;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--blue);
        }

        .easy {
            color: var(--green);
        }

        .medium {
            color: var(--yellow);
        }

        .hard {
            color: var(--red);
        }

        .status-dot {
            display: inline-block;
            width: 0.5rem;
            height: 0.5rem;
            border-radius: 50%;
            margin-right: 0.25rem;
        }

        .status-complete {
            background-color: var(--green);
        }

        .status-in-progress {
            background-color: var(--yellow);
        }

        .status-needs-revision {
            background-color: var(--orange);
        }

        .status-not-started {
            background-color: var(--text-muted);
        }

        a {
            color: var(--blue);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .status-tabs {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .card-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Small status badges */
        .status-badge {
            display: inline-flex;
            align-items: center;
            font-size: 0.7rem;
        }

        .planner-day {
            margin-bottom: 1rem;
            border-left: 3px solid var(--blue);
            padding-left: 0.5rem;
        }

        .planner-day-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .planner-day-title {
            font-size: 0.9rem;
            font-weight: 500;
        }

        .planner-day-meta {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* Form controls for planner */
        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.25rem;
            font-size: 0.8rem;
        }

        .form-control {
            width: 100%;
            padding: 0.5rem;
            border-radius: 0.25rem;
            background-color: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }
        
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
        }

        /* Compact cards */
        .compact-card {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 0.25rem;
            padding: 0.75rem;
            margin-bottom: 1rem;
        }

        .compact-card-title {
            font-size: 0.8rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        /* Revision settings */
        .revision-settings {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .revision-setting {
            flex: 1;
        }

        /* Priority checkboxes */
        .priority-checkboxes {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .priority-checkbox {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .priority-checkbox input[type="checkbox"] {
            appearance: none;
            width: 1rem;
            height: 1rem;
            border: 1px solid var(--border);
            border-radius: 0.25rem;
            cursor: pointer;
            position: relative;
        }

        .priority-checkbox input[type="checkbox"]:checked {
            background-color: var(--blue);
        }

        .priority-checkbox input[type="checkbox"]:checked::after {
            content: "✓";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 0.75rem;
        }

        /* Auth styles */
        .auth-container {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 1rem;
        }

        .auth-button {
            padding: 0.5rem 1rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            cursor: pointer;
            border: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .auth-button.google {
            background-color: #4285F4;
            color: white;
        }

        .auth-button.signout {
            background-color: var(--red);
            color: white;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .user-avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
        }

        .user-name {
            font-size: 0.75rem;
        }

        /* Calculation results */
        .calculation-results {
            background-color: var(--bg-tertiary);
            padding: 0.75rem;
            border-radius: 0.25rem;
            margin-bottom: 1rem;
            font-size: 0.75rem;
        }

        .calculation-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.25rem;
        }

        .calculation-total {
            font-weight: bold;
            margin-top: 0.5rem;
            padding-top: 0.5rem;
            border-top: 1px solid var(--border);
        }

        /* Content tabs for filtered problems view */
        .content-tabs {
            margin-bottom: 1rem;
        }

        .content-tab-buttons {
            display: flex;
            border-bottom: 1px solid var(--border);
        }

        .content-tab-button {
            padding: 0.5rem 1rem;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            font-size: 0.8rem;
            color: var(--text-muted);
            cursor: pointer;
        }

        .content-tab-button.active {
            color: var(--blue);
            border-bottom-color: var(--blue);
        }

        .content-tab-panel {
            display: none;
            padding-top: 1rem;
        }

        .content-tab-panel.active {
            display: block;
        }

        .badge {
            display: inline-block;
            padding: 0.15rem 0.5rem;
            border-radius: 1rem;
            font-size: 0.7rem;
            font-weight: 500;
            background-color: var(--bg-tertiary);
            color: var(--text-muted);
            margin-left: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <h1>LeetCode Tracker</h1>
                <div class="header-subtitle">175 Google Interview Problems</div>
            </div>
            <div class="auth-container" id="auth-container">
                <!-- Auth buttons will be loaded here -->
            </div>
        </header>
        
        <!-- Status Tabs (Replacing stat cards) -->
        <div class="status-tabs">
            <div class="status-tab completed" data-status="completed">
                <div class="status-tab-title">Completed</div>
                <div class="status-tab-count" id="completed-count">0</div>
            </div>
            <div class="status-tab review" data-status="review">
                <div class="status-tab-title">Review</div>
                <div class="status-tab-count" id="review-count">0</div>
            </div>
            <div class="status-tab today" data-status="today">
                <div class="status-tab-title">Today's</div>
                <div class="status-tab-count" id="today-count">0</div>
            </div>
            <div class="status-tab pending" data-status="pending">
                <div class="status-tab-title">Pending</div>
                <div class="status-tab-count" id="pending-count">0</div>
            </div>
        </div>
        
        <!-- Total Progress Indicator -->
        <div class="total-progress">
            <span class="total-progress-label">Total Progress:</span>
            <span class="total-progress-value" id="total-progress">0/175 (0%)</span>
        </div>
        
        <!-- Compact Stats Cards -->
        <div class="card-grid">
            <div class="compact-card">
                <div class="compact-card-title">Problem Priorities</div>
                <div id="priority-progress">
                    <!-- Priority progress will be loaded here -->
                </div>
            </div>
            <div class="compact-card">
                <div class="compact-card-title">Progress by Difficulty</div>
                <div id="difficulty-progress">
                    <!-- Difficulty progress will be loaded here -->
                </div>
            </div>
        </div>
        
        <!-- Tab Navigation -->
        <div class="tab-navigation">
            <button class="tab-button active" data-tab="tracker">Problem Tracker</button>
            <button class="tab-button" data-tab="planner">Study Planner</button>
            <button class="tab-button" data-tab="analytics">Analytics</button>
        </div>
        
        <!-- Content tabs for problems view -->
        <div id="content-tabs" class="content-tabs">
            <div class="content-tab-buttons">
                <button class="content-tab-button active" data-content-tab="all">All Problems</button>
                <button class="content-tab-button" data-content-tab="completed">Completed <span class="badge" id="completed-badge">0</span></button>
                <button class="content-tab-button" data-content-tab="review">Review <span class="badge" id="review-badge">0</span></button>
                <button class="content-tab-button" data-content-tab="today">Today's <span class="badge" id="today-badge">0</span></button>
                <button class="content-tab-button" data-content-tab="pending">Pending <span class="badge" id="pending-badge">0</span></button>
            </div>
            
            <!-- All Problems Tab Panel (default) -->
            <div class="content-tab-panel active" id="all-tab-panel">
                <!-- Tracker Tab -->
                <div id="tracker-tab" class="tab-content active">
                    <div class="filters">
                        <div class="filter-group">
                            <select id="category-filter">
                                <option value="All">All Categories</option>
                            </select>
                            <select id="difficulty-filter">
                                <option value="All">All Difficulties</option>
                            </select>
                            <select id="priority-filter">
                                <option value="All">All Priorities</option>
                            </select>
                        </div>
                        <div class="search-container">
                            <span class="search-icon">🔍</span>
                            <input type="search" id="search-input" placeholder="Search problems...">
                        </div>
                    </div>
                    <div class="table-container">
                        <table id="problems-table">
                            <thead>
                                <tr>
                                    <th style="width: 50px">#</th>
                                    <th>Problem</th>
                                    <th style="width: 150px">Category</th>
                                    <th style="width: 80px">Difficulty</th>
                                    <th style="width: 80px">Priority</th>
                                    <th style="width: 100px">Last Attempt</th>
                                    <th style="width: 130px">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="problems-table-body">
                                <!-- Problems will be loaded here -->
                            </tbody>
                        </table>
                        <div class="pagination">
                            <div class="pagination-info" id="pagination-info">Showing 0-0 of 0</div>
                            <div class="pagination-controls">
                                <button class="btn btn-disabled" id="prev-page">Prev</button>
                                <span id="page-info">0 / 0</span>
                                <button class="btn btn-disabled" id="next-page">Next</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Completed Tab Panel -->
            <div class="content-tab-panel" id="completed-tab-panel">
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th style="width: 50px">#</th>
                                <th>Problem</th>
                                <th style="width: 150px">Category</th>
                                <th style="width: 80px">Difficulty</th>
                                <th style="width: 100px">Last Attempt</th>
                                <th style="width: 130px">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="completed-problems-body">
                            <!-- Completed problems will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Review Tab Panel -->
            <div class="content-tab-panel" id="review-tab-panel">
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th style="width: 50px">#</th>
                                <th>Problem</th>
                                <th style="width: 150px">Category</th>
                                <th style="width: 80px">Difficulty</th>
                                <th style="width: 100px">Last Attempt</th>
                                <th style="width: 130px">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="review-problems-body">
                            <!-- Review problems will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Today's Tab Panel -->
            <div class="content-tab-panel" id="today-tab-panel">
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th style="width: 50px">#</th>
                                <th>Problem</th>
                                <th style="width: 150px">Category</th>
                                <th style="width: 80px">Difficulty</th>
                                <th style="width: 100px">Status</th>
                                <th style="width: 130px">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="today-problems-body">
                            <!-- Today's problems will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Pending Tab Panel -->
            <div class="content-tab-panel" id="pending-tab-panel">
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th style="width: 50px">#</th>
                                <th>Problem</th>
                                <th style="width: 150px">Category</th>
                                <th style="width: 80px">Difficulty</th>
                                <th style="width: 100px">Scheduled</th>
                                <th style="width: 130px">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="pending-problems-body">
                            <!-- Pending problems will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Planner Tab -->
        <div id="planner-tab" class="tab-content">
            <div class="card">
                <div class="card-title">Study Plan Configuration</div>
                
                <div class="priority-checkboxes">
                    <label class="priority-checkbox">
                        <input type="checkbox" id="priority-high" checked>
                        <span>High Priority</span>
                    </label>
                    <label class="priority-checkbox">
                        <input type="checkbox" id="priority-high-medium" checked>
                        <span>High-Medium Priority</span>
                    </label>
                    <label class="priority-checkbox">
                        <input type="checkbox" id="priority-medium">
                        <span>Medium Priority</span>
                    </label>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="plan-days">Number of Study Days</label>
                    <input type="number" id="plan-days" class="form-control" min="1" value="30">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="problems-per-day">Problems Per Day</label>
                    <input type="number" id="problems-per-day" class="form-control" min="1" value="3" readonly>
                </div>
                
                <div id="calculation-results" class="calculation-results">
                    <div class="calculation-row">
                        <span>High Priority Problems:</span>
                        <span id="high-count">0</span>
                    </div>
                    <div class="calculation-row">
                        <span>High-Medium Priority Problems:</span>
                        <span id="high-medium-count">0</span>
                    </div>
                    <div class="calculation-row">
                        <span>Medium Priority Problems:</span>
                        <span id="medium-count">0</span>
                    </div>
                    <div class="calculation-row calculation-total">
                        <span>Total Selected Problems:</span>
                        <span id="total-selected">0</span>
                    </div>
                </div>
                
                <div class="revision-settings">
                    <div class="form-group revision-setting">
                        <label class="form-label" for="first-revision">First Revision (days)</label>
                        <input type="number" id="first-revision" class="form-control" min="1" value="5">
                    </div>
                    <div class="form-group revision-setting">
                        <label class="form-label" for="second-revision">Second Revision (days)</label>
                        <input type="number" id="second-revision" class="form-control" min="1" value="14">
                    </div>
                </div>
                
                <div class="form-actions">
                    <button id="generate-plan" class="btn btn-primary">Generate Plan</button>
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">Today's Problems</div>
                <div id="today-problems" class="problem-list">
                    <!-- Today's problems will be loaded here -->
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">Pending Problems</div>
                <div id="pending-problems" class="problem-list">
                    <!-- Pending problems will be loaded here -->
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">Problems Needing Revision</div>
                <div id="revision-problems" class="problem-list">
                    <!-- Revision problems will be loaded here -->
                </div>
            </div>
        </div>
        
        <!-- Analytics Tab -->
        <div id="analytics-tab" class="tab-content">
            <div class="card-grid">
                <div class="card">
                    <div class="card-title">Progress by Category</div>
                    <div id="category-progress">
                        <!-- Category progress will be loaded here -->
                    </div>
                </div>
                <div class="card">
                    <div class="card-title">Estimated Completion</div>
                    <div class="progress-container">
                        <div class="progress-header">
                            <span>Overall Progress</span>
                            <span id="overall-progress-percentage">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="overall-progress-bar" style="width: 0%"></div>
                        </div>
                        <div class="progress-meta" id="estimated-days" style="margin-top: 0.25rem; font-size: 0.75rem; color: var(--text-muted);">
                            Est. 0 days remaining (3 problems/day)
                        </div>
                    </div>
                    <div>
                        <div style="font-size: 0.75rem; margin-bottom: 0.5rem;">Status Breakdown</div>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem;">
                            <div style="padding: 0.5rem; background-color: #263149; border-radius: 0.25rem; text-align: center;">
                                <div style="font-size: 0.75rem; color: var(--green);" id="status-complete-percentage">0%</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">Complete</div>
                            </div>
                            <div style="padding: 0.5rem; background-color: #263149; border-radius: 0.25rem; text-align: center;">
                                <div style="font-size: 0.75rem; color: var(--orange);" id="status-needs-revision-percentage">0%</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">Review</div>
                            </div>
                            <div style="padding: 0.5rem; background-color: #263149; border-radius: 0.25rem; text-align: center;">
                                <div style="font-size: 0.75rem; color: var(--text-muted);" id="status-not-started-percentage">0%</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">Not Started</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        // Initialize Firebase with your configuration
const firebaseConfig = {
  apiKey: "AIzaSyBnbrX52t_Y2QgJv5nNA4xeb0ZX94_kKeY",
  authDomain: "technavigator-8ecd1.firebaseapp.com",
  projectId: "technavigator-8ecd1",
  storageBucket: "technavigator-8ecd1.firebasestorage.app",
  messagingSenderId: "316020740391",
  appId: "1:316020740391:web:2f3ba461d5a179154cd902",
  measurementId: "G-WE013C9L92"
};

// Main data store - initializing these variables at the top level
const problems = [
{ id: 1, problem: "Contains Duplicate", number: 217, category: "Arrays & Hashing", difficulty: "Easy", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/contains-duplicate/", codeUrl: "https://leetcode.com/problems/contains-duplicate/description/" },
{ id: 2, problem: "Two Sum", number: 1, category: "Arrays & Hashing", difficulty: "Easy", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/two-sum/", codeUrl: "https://leetcode.com/problems/two-sum/description/" },
{ id: 3, problem: "Valid Anagram", number: 242, category: "Arrays & Hashing", difficulty: "Easy", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/valid-anagram/", codeUrl: "https://leetcode.com/problems/valid-anagram/description/" },
{ id: 4, problem: "Group Anagrams", number: 49, category: "Arrays & Hashing", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/group-anagrams/", codeUrl: "https://leetcode.com/problems/group-anagrams/description/" },
{ id: 5, problem: "Top K Frequent Elements", number: 347, category: "Arrays & Hashing", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/top-k-frequent-elements/", codeUrl: "https://leetcode.com/problems/top-k-frequent-elements/description/" },
{ id: 6, problem: "Product of Array Except Self", number: 238, category: "Arrays & Hashing", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/product-of-array-except-self/", codeUrl: "https://leetcode.com/problems/product-of-array-except-self/description/" },
{ id: 7, problem: "Longest Consecutive Sequence", number: 128, category: "Arrays & Hashing", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/longest-consecutive-sequence/", codeUrl: "https://leetcode.com/problems/longest-consecutive-sequence/description/" },
{ id: 8, problem: "Valid Palindrome", number: 125, category: "Two Pointers", difficulty: "Easy", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/valid-palindrome/", codeUrl: "https://leetcode.com/problems/valid-palindrome/description/" },
{ id: 9, problem: "3Sum", number: 15, category: "Two Pointers", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/3sum/", codeUrl: "https://leetcode.com/problems/3sum/description/" },
{ id: 10, problem: "Container With Most Water", number: 11, category: "Two Pointers", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/container-with-most-water/", codeUrl: "https://leetcode.com/problems/container-with-most-water/description/" },
{ id: 11, problem: "Trapping Rain Water", number: 42, category: "Two Pointers", difficulty: "Hard", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/trapping-rain-water/", codeUrl: "https://leetcode.com/problems/trapping-rain-water/description/" },
{ id: 12, problem: "Two Sum II - Input Array Is Sorted", number: 167, category: "Two Pointers", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/two-sum-ii-input-array-is-sorted/", codeUrl: "https://leetcode.com/problems/two-sum-ii-input-array-is-sorted/description/" },
{ id: 13, problem: "Best Time to Buy and Sell Stock", number: 121, category: "Sliding Window", difficulty: "Easy", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/best-time-to-buy-and-sell-stock/", codeUrl: "https://leetcode.com/problems/best-time-to-buy-and-sell-stock/description/" },
{ id: 14, problem: "Longest Substring Without Repeating Characters", number: 3, category: "Sliding Window", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/longest-substring-without-repeating-characters/", codeUrl: "https://leetcode.com/problems/longest-substring-without-repeating-characters/description/" },
{ id: 15, problem: "Longest Repeating Character Replacement", number: 424, category: "Sliding Window", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/longest-repeating-character-replacement/", codeUrl: "https://leetcode.com/problems/longest-repeating-character-replacement/description/" },
{ id: 16, problem: "Permutation in String", number: 567, category: "Sliding Window", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/permutation-in-string/", codeUrl: "https://leetcode.com/problems/permutation-in-string/description/" },
{ id: 17, problem: "Minimum Window Substring", number: 76, category: "Sliding Window", difficulty: "Hard", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/minimum-window-substring/", codeUrl: "https://leetcode.com/problems/minimum-window-substring/description/" },
{ id: 18, problem: "Valid Parentheses", number: 20, category: "Stack", difficulty: "Easy", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/valid-parentheses/", codeUrl: "https://leetcode.com/problems/valid-parentheses/description/" },
{ id: 19, problem: "Min Stack", number: 155, category: "Stack", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/min-stack/", codeUrl: "https://leetcode.com/problems/min-stack/description/" },
{ id: 20, problem: "Generate Parentheses", number: 22, category: "Stack", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/generate-parentheses/", codeUrl: "https://leetcode.com/problems/generate-parentheses/description/" },
{ id: 21, problem: "Daily Temperatures", number: 739, category: "Stack", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/daily-temperatures/", codeUrl: "https://leetcode.com/problems/daily-temperatures/description/" },
{ id: 22, problem: "Largest Rectangle in Histogram", number: 84, category: "Stack", difficulty: "Hard", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/largest-rectangle-in-histogram/", codeUrl: "https://leetcode.com/problems/largest-rectangle-in-histogram/description/" },
{ id: 23, problem: "Binary Search", number: 704, category: "Binary Search", difficulty: "Easy", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/binary-search/", codeUrl: "https://leetcode.com/problems/binary-search/description/" },
{ id: 24, problem: "Search a 2D Matrix", number: 74, category: "Binary Search", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/search-a-2d-matrix/", codeUrl: "https://leetcode.com/problems/search-a-2d-matrix/description/" },
{ id: 25, problem: "Find Minimum in Rotated Sorted Array", number: 153, category: "Binary Search", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/find-minimum-in-rotated-sorted-array/", codeUrl: "https://leetcode.com/problems/find-minimum-in-rotated-sorted-array/description/" },
{ id: 26, problem: "Search in Rotated Sorted Array", number: 33, category: "Binary Search", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/search-in-rotated-sorted-array/", codeUrl: "https://leetcode.com/problems/search-in-rotated-sorted-array/description/" },
{ id: 27, problem: "Median of Two Sorted Arrays", number: 4, category: "Binary Search", difficulty: "Hard", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/median-of-two-sorted-arrays/", codeUrl: "https://leetcode.com/problems/median-of-two-sorted-arrays/description/" },
{ id: 28, problem: "Reverse Linked List", number: 206, category: "Linked List", difficulty: "Easy", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/reverse-linked-list/", codeUrl: "https://leetcode.com/problems/reverse-linked-list/description/" },
{ id: 29, problem: "Merge Two Sorted Lists", number: 21, category: "Linked List", difficulty: "Easy", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/merge-two-sorted-lists/", codeUrl: "https://leetcode.com/problems/merge-two-sorted-lists/description/" },
{ id: 30, problem: "Reorder List", number: 143, category: "Linked List", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/reorder-list/", codeUrl: "https://leetcode.com/problems/reorder-list/description/" },
{ id: 31, problem: "LRU Cache", number: 146, category: "Linked List", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/lru-cache/", codeUrl: "https://leetcode.com/problems/lru-cache/description/" },
{ id: 32, problem: "Merge k Sorted Lists", number: 23, category: "Linked List", difficulty: "Hard", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/merge-k-sorted-lists/", codeUrl: "https://leetcode.com/problems/merge-k-sorted-lists/description/" },
{ id: 33, problem: "Invert Binary Tree", number: 226, category: "Trees", difficulty: "Easy", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/invert-binary-tree/", codeUrl: "https://leetcode.com/problems/invert-binary-tree/description/" },
{ id: 34, problem: "Maximum Depth of Binary Tree", number: 104, category: "Trees", difficulty: "Easy", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/maximum-depth-of-binary-tree/", codeUrl: "https://leetcode.com/problems/maximum-depth-of-binary-tree/description/" },
{ id: 35, problem: "Binary Tree Level Order Traversal", number: 102, category: "Trees", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/binary-tree-level-order-traversal/", codeUrl: "https://leetcode.com/problems/binary-tree-level-order-traversal/description/" },
{ id: 36, problem: "Lowest Common Ancestor of a Binary Tree", number: 236, category: "Trees", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree/", codeUrl: "https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree/description/" },
{ id: 37, problem: "Binary Tree Maximum Path Sum", number: 124, category: "Trees", difficulty: "Hard", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/binary-tree-maximum-path-sum/", codeUrl: "https://leetcode.com/problems/binary-tree-maximum-path-sum/description/" },
{ id: 38, problem: "Validate Binary Search Tree", number: 98, category: "Trees", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/validate-binary-search-tree/", codeUrl: "https://leetcode.com/problems/validate-binary-search-tree/description/" },
{ id: 39, problem: "Serialize and Deserialize Binary Tree", number: 297, category: "Trees", difficulty: "Hard", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/serialize-and-deserialize-binary-tree/", codeUrl: "https://leetcode.com/problems/serialize-and-deserialize-binary-tree/description/" },
{ id: 40, problem: "Implement Trie (Prefix Tree)", number: 208, category: "Tries", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/implement-trie-prefix-tree/", codeUrl: "https://leetcode.com/problems/implement-trie-prefix-tree/description/" },
{ id: 41, problem: "Design Add and Search Words Data Structure", number: 211, category: "Tries", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/design-add-and-search-words-data-structure/", codeUrl: "https://leetcode.com/problems/design-add-and-search-words-data-structure/description/" },
{ id: 42, problem: "Word Search II", number: 212, category: "Tries", difficulty: "Hard", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/word-search-ii/", codeUrl: "https://leetcode.com/problems/word-search-ii/description/" },
{ id: 43, problem: "Kth Largest Element in an Array", number: 215, category: "Heap / Priority Queue", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/kth-largest-element-in-an-array/", codeUrl: "https://leetcode.com/problems/kth-largest-element-in-an-array/description/" },
{ id: 44, problem: "Task Scheduler", number: 621, category: "Heap / Priority Queue", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/task-scheduler/", codeUrl: "https://leetcode.com/problems/task-scheduler/description/" },
{ id: 45, problem: "Find Median from Data Stream", number: 295, category: "Heap / Priority Queue", difficulty: "Hard", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/find-median-from-data-stream/", codeUrl: "https://leetcode.com/problems/find-median-from-data-stream/description/" },
{ id: 46, problem: "Subsets", number: 78, category: "Backtracking", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/subsets/", codeUrl: "https://leetcode.com/problems/subsets/description/" },
{ id: 47, problem: "Combination Sum", number: 39, category: "Backtracking", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/combination-sum/", codeUrl: "https://leetcode.com/problems/combination-sum/description/" },
{ id: 48, problem: "Word Search", number: 79, category: "Backtracking", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/word-search/", codeUrl: "https://leetcode.com/problems/word-search/description/" },
{ id: 49, problem: "Insert Interval", number: 57, category: "Intervals", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/insert-interval/", codeUrl: "https://leetcode.com/problems/insert-interval/description/" },
{ id: 50, problem: "Merge Intervals", number: 56, category: "Intervals", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/merge-intervals/", codeUrl: "https://leetcode.com/problems/merge-intervals/description/" },
{ id: 51, problem: "Non-overlapping Intervals", number: 435, category: "Intervals", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/non-overlapping-intervals/", codeUrl: "https://leetcode.com/problems/non-overlapping-intervals/description/" },
{ id: 52, problem: "Meeting Rooms II", number: 253, category: "Intervals", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/meeting-rooms-ii/", codeUrl: "https://leetcode.com/problems/meeting-rooms-ii/description/" },
{ id: 53, problem: "Jump Game", number: 55, category: "Greedy", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/jump-game/", codeUrl: "https://leetcode.com/problems/jump-game/description/" },
{ id: 54, problem: "Jump Game II", number: 45, category: "Greedy", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/jump-game-ii/", codeUrl: "https://leetcode.com/problems/jump-game-ii/description/" },
{ id: 55, problem: "Gas Station", number: 134, category: "Greedy", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/gas-station/", codeUrl: "https://leetcode.com/problems/gas-station/description/" },
{ id: 56, problem: "Climbing Stairs", number: 70, category: "1D Dynamic Programming", difficulty: "Easy", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/climbing-stairs/", codeUrl: "https://leetcode.com/problems/climbing-stairs/description/" },
{ id: 57, problem: "House Robber", number: 198, category: "1D Dynamic Programming", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/house-robber/", codeUrl: "https://leetcode.com/problems/house-robber/description/" },
{ id: 58, problem: "House Robber II", number: 213, category: "1D Dynamic Programming", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/house-robber-ii/", codeUrl: "https://leetcode.com/problems/house-robber-ii/description/" },
{ id: 59, problem: "Longest Palindromic Substring", number: 5, category: "1D Dynamic Programming", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/longest-palindromic-substring/", codeUrl: "https://leetcode.com/problems/longest-palindromic-substring/description/" },
{ id: 60, problem: "Palindromic Substrings", number: 647, category: "1D Dynamic Programming", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/palindromic-substrings/", codeUrl: "https://leetcode.com/problems/palindromic-substrings/description/" },
{ id: 61, problem: "Decode Ways", number: 91, category: "1D Dynamic Programming", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/decode-ways/", codeUrl: "https://leetcode.com/problems/decode-ways/description/" },
{ id: 62, problem: "Coin Change", number: 322, category: "1D Dynamic Programming", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/coin-change/", codeUrl: "https://leetcode.com/problems/coin-change/description/" },
{ id: 63, problem: "Maximum Subarray", number: 53, category: "1D Dynamic Programming", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/maximum-subarray/", codeUrl: "https://leetcode.com/problems/maximum-subarray/description/" },
{ id: 64, problem: "Maximum Product Subarray", number: 152, category: "1D Dynamic Programming", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/maximum-product-subarray/", codeUrl: "https://leetcode.com/problems/maximum-product-subarray/description/" },
{ id: 65, problem: "Word Break", number: 139, category: "1D Dynamic Programming", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/word-break/", codeUrl: "https://leetcode.com/problems/word-break/description/" },
{ id: 66, problem: "Longest Increasing Subsequence", number: 300, category: "1D Dynamic Programming", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/longest-increasing-subsequence/", codeUrl: "https://leetcode.com/problems/longest-increasing-subsequence/description/" },
{ id: 67, problem: "Partition Equal Subset Sum", number: 416, category: "1D Dynamic Programming", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/partition-equal-subset-sum/", codeUrl: "https://leetcode.com/problems/partition-equal-subset-sum/description/" },
{ id: 68, problem: "Combination Sum IV", number: 377, category: "1D Dynamic Programming", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/combination-sum-iv/", codeUrl: "https://leetcode.com/problems/combination-sum-iv/description/" },
{ id: 69, problem: "Unique Paths", number: 62, category: "2D Dynamic Programming", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/unique-paths/", codeUrl: "https://leetcode.com/problems/unique-paths/description/" },
{ id: 70, problem: "Longest Common Subsequence", number: 1143, category: "2D Dynamic Programming", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/longest-common-subsequence/", codeUrl: "https://leetcode.com/problems/longest-common-subsequence/description/" },
{ id: 71, problem: "Best Time to Buy and Sell Stock with Cooldown", number: 309, category: "2D Dynamic Programming", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/", codeUrl: "https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/description/" },
{ id: 72, problem: "Edit Distance", number: 72, category: "2D Dynamic Programming", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/edit-distance/", codeUrl: "https://leetcode.com/problems/edit-distance/description/" },
{ id: 73, problem: "Target Sum", number: 494, category: "2D Dynamic Programming", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/target-sum/", codeUrl: "https://leetcode.com/problems/target-sum/description/" },
{ id: 74, problem: "Interleaving String", number: 97, category: "2D Dynamic Programming", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/interleaving-string/", codeUrl: "https://leetcode.com/problems/interleaving-string/description/" },
{ id: 75, problem: "Coin Change II", number: 518, category: "2D Dynamic Programming", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/coin-change-ii/", codeUrl: "https://leetcode.com/problems/coin-change-ii/description/" },
{ id: 76, problem: "Number of Islands", number: 200, category: "Graphs", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/number-of-islands/", codeUrl: "https://leetcode.com/problems/number-of-islands/description/" },
{ id: 77, problem: "Clone Graph", number: 133, category: "Graphs", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/clone-graph/", codeUrl: "https://leetcode.com/problems/clone-graph/description/" },
{ id: 78, problem: "Pacific Atlantic Water Flow", number: 417, category: "Graphs", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/pacific-atlantic-water-flow/", codeUrl: "https://leetcode.com/problems/pacific-atlantic-water-flow/description/" },
{ id: 79, problem: "Course Schedule", number: 207, category: "Graphs", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/course-schedule/", codeUrl: "https://leetcode.com/problems/course-schedule/description/" },
{ id: 80, problem: "Course Schedule II", number: 210, category: "Graphs", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/course-schedule-ii/", codeUrl: "https://leetcode.com/problems/course-schedule-ii/description/" },
{ id: 81, problem: "Graph Valid Tree", number: 261, category: "Graphs", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/graph-valid-tree/", codeUrl: "https://leetcode.com/problems/graph-valid-tree/description/" },
{ id: 82, problem: "Number of Connected Components", number: 323, category: "Graphs", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/number-of-connected-components-in-an-undirected-graph/", codeUrl: "https://leetcode.com/problems/number-of-connected-components-in-an-undirected-graph/description/" },
{ id: 83, problem: "Word Ladder", number: 127, category: "Graphs", difficulty: "Hard", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/word-ladder/", codeUrl: "https://leetcode.com/problems/word-ladder/description/" },
{ id: 84, problem: "Network Delay Time", number: 743, category: "Graphs", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/network-delay-time/", codeUrl: "https://leetcode.com/problems/network-delay-time/description/" },
{ id: 85, problem: "Redundant Connection", number: 684, category: "Graphs", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/redundant-connection/", codeUrl: "https://leetcode.com/problems/redundant-connection/description/" },
{ id: 86, problem: "Rotting Oranges", number: 994, category: "Graphs", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/rotting-oranges/", codeUrl: "https://leetcode.com/problems/rotting-oranges/description/" },
{ id: 87, problem: "Surrounded Regions", number: 130, category: "Graphs", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/surrounded-regions/", codeUrl: "https://leetcode.com/problems/surrounded-regions/description/" },
{ id: 88, problem: "Alien Dictionary", number: 269, category: "Graphs", difficulty: "Hard", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/alien-dictionary/", codeUrl: "https://leetcode.com/problems/alien-dictionary/description/" },
{ id: 89, problem: "Cheapest Flights Within K Stops", number: 787, category: "Graphs", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/cheapest-flights-within-k-stops/", codeUrl: "https://leetcode.com/problems/cheapest-flights-within-k-stops/description/" },
{ id: 90, problem: "Evaluate Division", number: 399, category: "Graphs", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/evaluate-division/", codeUrl: "https://leetcode.com/problems/evaluate-division/description/" },
{ id: 91, problem: "Design Twitter", number: 355, category: "Design", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/design-twitter/", codeUrl: "https://leetcode.com/problems/design-twitter/description/" },
{ id: 92, problem: "Design Browser History", number: 1472, category: "Design", difficulty: "Medium", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/design-browser-history/", codeUrl: "https://leetcode.com/problems/design-browser-history/description/" },
{ id: 93, problem: "Single Number", number: 136, category: "Bit Manipulation", difficulty: "Easy", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/single-number/", codeUrl: "https://leetcode.com/problems/single-number/description/" },
{ id: 94, problem: "Counting Bits", number: 338, category: "Bit Manipulation", difficulty: "Easy", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/counting-bits/", codeUrl: "https://leetcode.com/problems/counting-bits/description/" },
{ id: 95, problem: "Number of 1 Bits", number: 191, category: "Bit Manipulation", difficulty: "Easy", priority: "High", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/number-of-1-bits/", codeUrl: "https://leetcode.com/problems/number-of-1-bits/description/" },
{ id: 96, problem: "Insert Delete GetRandom O(1)", number: 380, category: "Arrays & Hashing", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/insert-delete-getrandom-o1/", codeUrl: "https://leetcode.com/problems/insert-delete-getrandom-o1/description/" },
{ id: 97, problem: "Find All Duplicates in an Array", number: 442, category: "Arrays & Hashing", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/find-all-duplicates-in-an-array/", codeUrl: "https://leetcode.com/problems/find-all-duplicates-in-an-array/description/" },
{ id: 98, problem: "First Missing Positive", number: 41, category: "Arrays & Hashing", difficulty: "Hard", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/first-missing-positive/", codeUrl: "https://leetcode.com/problems/first-missing-positive/description/" },
{ id: 99, problem: "Find the Duplicate Number", number: 287, category: "Arrays & Hashing", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/find-the-duplicate-number/", codeUrl: "https://leetcode.com/problems/find-the-duplicate-number/description/" },
{ id: 100, problem: "Set Matrix Zeroes", number: 73, category: "Arrays & Hashing", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/set-matrix-zeroes/", codeUrl: "https://leetcode.com/problems/set-matrix-zeroes/description/" },
{ id: 101, problem: "Rotate Image", number: 48, category: "Arrays & Hashing", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/rotate-image/", codeUrl: "https://leetcode.com/problems/rotate-image/description/" },
{ id: 102, problem: "Next Permutation", number: 31, category: "Two Pointers", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/next-permutation/", codeUrl: "https://leetcode.com/problems/next-permutation/description/" },
{ id: 103, problem: "3Sum Closest", number: 16, category: "Two Pointers", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/3sum-closest/", codeUrl: "https://leetcode.com/problems/3sum-closest/description/" },
{ id: 104, problem: "Sort Colors", number: 75, category: "Two Pointers", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/sort-colors/", codeUrl: "https://leetcode.com/problems/sort-colors/description/" },
{ id: 105, problem: "Reverse Words in a String", number: 151, category: "Two Pointers", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/reverse-words-in-a-string/", codeUrl: "https://leetcode.com/problems/reverse-words-in-a-string/description/" },
{ id: 106, problem: "Find All Anagrams in a String", number: 438, category: "Sliding Window", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/find-all-anagrams-in-a-string/", codeUrl: "https://leetcode.com/problems/find-all-anagrams-in-a-string/description/" },
{ id: 107, problem: "Basic Calculator", number: 224, category: "Stack", difficulty: "Hard", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/basic-calculator/", codeUrl: "https://leetcode.com/problems/basic-calculator/description/" },
{ id: 108, problem: "Sum of Subarray Minimums", number: 907, category: "Stack", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/sum-of-subarray-minimums/", codeUrl: "https://leetcode.com/problems/sum-of-subarray-minimums/description/" },
{ id: 109, problem: "Decode String", number: 394, category: "Stack", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/decode-string/", codeUrl: "https://leetcode.com/problems/decode-string/description/" },
{ id: 110, problem: "Find First and Last Position of Element in Sorted Array", number: 34, category: "Binary Search", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/find-first-and-last-position-of-element-in-sorted-array/", codeUrl: "https://leetcode.com/problems/find-first-and-last-position-of-element-in-sorted-array/description/" },
{ id: 111, problem: "Split Array Largest Sum", number: 410, category: "Binary Search", difficulty: "Hard", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/split-array-largest-sum/", codeUrl: "https://leetcode.com/problems/split-array-largest-sum/description/" },
{ id: 112, problem: "Reverse Nodes in k-Group", number: 25, category: "Linked List", difficulty: "Hard", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/reverse-nodes-in-k-group/", codeUrl: "https://leetcode.com/problems/reverse-nodes-in-k-group/description/" },
{ id: 113, problem: "Linked List Cycle II", number: 142, category: "Linked List", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/linked-list-cycle-ii/", codeUrl: "https://leetcode.com/problems/linked-list-cycle-ii/description/" },
{ id: 114, problem: "Odd Even Linked List", number: 328, category: "Linked List", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/odd-even-linked-list/", codeUrl: "https://leetcode.com/problems/odd-even-linked-list/description/" },
{ id: 115, problem: "Construct Binary Tree from Preorder and Inorder Traversal", number: 105, category: "Trees", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/", codeUrl: "https://leetcode.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/description/" },
{ id: 116, problem: "Binary Tree Right Side View", number: 199, category: "Trees", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/binary-tree-right-side-view/", codeUrl: "https://leetcode.com/problems/binary-tree-right-side-view/description/" },
{ id: 117, problem: "Kth Smallest Element in a BST", number: 230, category: "Trees", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/kth-smallest-element-in-a-bst/", codeUrl: "https://leetcode.com/problems/kth-smallest-element-in-a-bst/description/" },
{ id: 118, problem: "House Robber III", number: 337, category: "Trees", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/house-robber-iii/", codeUrl: "https://leetcode.com/problems/house-robber-iii/description/" },
{ id: 119, problem: "Longest Increasing Path in a Matrix", number: 329, category: "2D Dynamic Programming", difficulty: "Hard", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/longest-increasing-path-in-a-matrix/", codeUrl: "https://leetcode.com/problems/longest-increasing-path-in-a-matrix/description/" },
{ id: 120, problem: "Distinct Subsequences", number: 115, category: "2D Dynamic Programming", difficulty: "Hard", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/distinct-subsequences/", codeUrl: "https://leetcode.com/problems/distinct-subsequences/description/" },
{ id: 121, problem: "Regular Expression Matching", number: 10, category: "2D Dynamic Programming", difficulty: "Hard", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/regular-expression-matching/", codeUrl: "https://leetcode.com/problems/regular-expression-matching/description/" },
{ id: 122, problem: "Minimum Path Sum", number: 64, category: "2D Dynamic Programming", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/minimum-path-sum/", codeUrl: "https://leetcode.com/problems/minimum-path-sum/description/" },
{ id: 123, problem: "Maximal Square", number: 221, category: "2D Dynamic Programming", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/maximal-square/", codeUrl: "https://leetcode.com/problems/maximal-square/description/" },
{ id: 124, problem: "Wildcard Matching", number: 44, category: "2D Dynamic Programming", difficulty: "Hard", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/wildcard-matching/", codeUrl: "https://leetcode.com/problems/wildcard-matching/description/" },
{ id: 125, problem: "Best Time to Buy and Sell Stock III", number: 123, category: "2D Dynamic Programming", difficulty: "Hard", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iii/", codeUrl: "https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iii/description/" },
{ id: 126, problem: "Burst Balloons", number: 312, category: "2D Dynamic Programming", difficulty: "Hard", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/burst-balloons/", codeUrl: "https://leetcode.com/problems/burst-balloons/description/" },
{ id: 127, problem: "Best Time to Buy and Sell Stock IV", number: 188, category: "2D Dynamic Programming", difficulty: "Hard", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iv/", codeUrl: "https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iv/description/" },
{ id: 128, problem: "Minimum Cost to Cut a Stick", number: 1547, category: "2D Dynamic Programming", difficulty: "Hard", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/minimum-cost-to-cut-a-stick/", codeUrl: "https://leetcode.com/problems/minimum-cost-to-cut-a-stick/description/" },
{ id: 129, problem: "Cherry Pickup II", number: 1463, category: "2D Dynamic Programming", difficulty: "Hard", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/cherry-pickup-ii/", codeUrl: "https://leetcode.com/problems/cherry-pickup-ii/description/" },
{ id: 130, problem: "Minimum Cost For Tickets", number: 983, category: "2D Dynamic Programming", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/minimum-cost-for-tickets/", codeUrl: "https://leetcode.com/problems/minimum-cost-for-tickets/description/" },
{ id: 131, problem: "Accounts Merge", number: 721, category: "Graphs", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/accounts-merge/", codeUrl: "https://leetcode.com/problems/accounts-merge/description/" },
{ id: 132, problem: "Min Cost to Connect All Points", number: 1584, category: "Graphs", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/min-cost-to-connect-all-points/", codeUrl: "https://leetcode.com/problems/min-cost-to-connect-all-points/description/" },
{ id: 133, problem: "Reconstruct Itinerary", number: 332, category: "Graphs", difficulty: "Hard", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/reconstruct-itinerary/", codeUrl: "https://leetcode.com/problems/reconstruct-itinerary/description/" },
{ id: 134, problem: "Is Graph Bipartite?", number: 785, category: "Graphs", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/is-graph-bipartite/", codeUrl: "https://leetcode.com/problems/is-graph-bipartite/description/" },
{ id: 135, problem: "Number of Provinces", number: 547, category: "Graphs", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/number-of-provinces/", codeUrl: "https://leetcode.com/problems/number-of-provinces/description/" },
{ id: 136, problem: "Open the Lock", number: 752, category: "Graphs", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/open-the-lock/", codeUrl: "https://leetcode.com/problems/open-the-lock/description/" },
{ id: 137, problem: "Bus Routes", number: 815, category: "Graphs", difficulty: "Hard", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/bus-routes/", codeUrl: "https://leetcode.com/problems/bus-routes/description/" },
{ id: 138, problem: "LFU Cache", number: 460, category: "Design", difficulty: "Hard", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/lfu-cache/", codeUrl: "https://leetcode.com/problems/lfu-cache/description/" },
{ id: 139, problem: "Design File System", number: 1166, category: "Design", difficulty: "Medium", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/design-file-system/", codeUrl: "https://leetcode.com/problems/design-file-system/description/" },
{ id: 140, problem: "Design Search Autocomplete System", number: 642, category: "Design", difficulty: "Hard", priority: "Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/design-search-autocomplete-system/", codeUrl: "https://leetcode.com/problems/design-search-autocomplete-system/description/" },
{ id: 141, problem: "Hand of Straights", number: 846, category: "Greedy", difficulty: "Medium", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/hand-of-straights/", codeUrl: "https://leetcode.com/problems/hand-of-straights/description/" },
{ id: 142, problem: "Candy", number: 135, category: "Greedy", difficulty: "Hard", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/candy/", codeUrl: "https://leetcode.com/problems/candy/description/" },
{ id: 143, problem: "Partition Labels", number: 763, category: "Greedy", difficulty: "Medium", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/partition-labels/", codeUrl: "https://leetcode.com/problems/partition-labels/description/" },
{ id: 144, problem: "Minimum Number of Refueling Stops", number: 871, category: "Greedy", difficulty: "Hard", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/minimum-number-of-refueling-stops/", codeUrl: "https://leetcode.com/problems/minimum-number-of-refueling-stops/description/" },
{ id: 145, problem: "Minimum Number of Arrows to Burst Balloons", number: 452, category: "Greedy", difficulty: "Medium", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/minimum-number-of-arrows-to-burst-balloons/", codeUrl: "https://leetcode.com/problems/minimum-number-of-arrows-to-burst-balloons/description/" },
{ id: 146, problem: "Car Fleet", number: 853, category: "Greedy", difficulty: "Medium", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/car-fleet/", codeUrl: "https://leetcode.com/problems/car-fleet/description/" },
{ id: 147, problem: "Remove Covered Intervals", number: 1288, category: "Intervals", difficulty: "Medium", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/remove-covered-intervals/", codeUrl: "https://leetcode.com/problems/remove-covered-intervals/description/" },
{ id: 148, problem: "Swim in Rising Water", number: 778, category: "Graphs", difficulty: "Hard", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/swim-in-rising-water/", codeUrl: "https://leetcode.com/problems/swim-in-rising-water/description/" },
{ id: 149, problem: "Making A Large Island", number: 827, category: "Graphs", difficulty: "Hard", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/making-a-large-island/", codeUrl: "https://leetcode.com/problems/making-a-large-island/description/" },
{ id: 150, problem: "Minimum Height Trees", number: 310, category: "Graphs", difficulty: "Medium", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/minimum-height-trees/", codeUrl: "https://leetcode.com/problems/minimum-height-trees/description/" },
{ id: 151, problem: "Find the City With the Smallest Number of Neighbors", number: 1334, category: "Graphs", difficulty: "Medium", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/find-the-city-with-the-smallest-number-of-neighbors-at-a-threshold-distance/", codeUrl: "https://leetcode.com/problems/find-the-city-with-the-smallest-number-of-neighbors-at-a-threshold-distance/description/" },
{ id: 152, problem: "Critical Connections in a Network", number: 1192, category: "Graphs", difficulty: "Hard", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/critical-connections-in-a-network/", codeUrl: "https://leetcode.com/problems/critical-connections-in-a-network/description/" },
{ id: 153, problem: "Path with Maximum Minimum Value", number: 1102, category: "Graphs", difficulty: "Medium", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/path-with-maximum-minimum-value/", codeUrl: "https://leetcode.com/problems/path-with-maximum-minimum-value/description/" },
{ id: 154, problem: "Shortest Path in a Grid with Obstacles Elimination", number: 1293, category: "Graphs", difficulty: "Hard", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/shortest-path-in-a-grid-with-obstacles-elimination/", codeUrl: "https://leetcode.com/problems/shortest-path-in-a-grid-with-obstacles-elimination/description/" },
{ id: 155, problem: "Shortest Path to Get All Keys", number: 864, category: "Graphs", difficulty: "Hard", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/shortest-path-to-get-all-keys/", codeUrl: "https://leetcode.com/problems/shortest-path-to-get-all-keys/description/" },
{ id: 156, problem: "Connecting Cities With Minimum Cost", number: 1135, category: "Graphs", difficulty: "Medium", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/connecting-cities-with-minimum-cost/", codeUrl: "https://leetcode.com/problems/connecting-cities-with-minimum-cost/description/" },
{ id: 157, problem: "Reachable Nodes In Subdivided Graph", number: 882, category: "Graphs", difficulty: "Hard", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/reachable-nodes-in-subdivided-graph/", codeUrl: "https://leetcode.com/problems/reachable-nodes-in-subdivided-graph/description/" },
{ id: 158, problem: "Stone Game", number: 877, category: "2D Dynamic Programming", difficulty: "Medium", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/stone-game/", codeUrl: "https://leetcode.com/problems/stone-game/description/" },
{ id: 159, problem: "Longest Arithmetic Subsequence", number: 1027, category: "1D Dynamic Programming", difficulty: "Medium", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/longest-arithmetic-subsequence/", codeUrl: "https://leetcode.com/problems/longest-arithmetic-subsequence/description/" },
{ id: 160, problem: "Palindrome Partitioning II", number: 132, category: "1D Dynamic Programming", difficulty: "Hard", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/palindrome-partitioning-ii/", codeUrl: "https://leetcode.com/problems/palindrome-partitioning-ii/description/" },
{ id: 161, problem: "Minimum Falling Path Sum", number: 931, category: "2D Dynamic Programming", difficulty: "Medium", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/minimum-falling-path-sum/", codeUrl: "https://leetcode.com/problems/minimum-falling-path-sum/description/" },
{ id: 162, problem: "Number of Ways to Stay in the Same Place After Some Steps", number: 1269, category: "1D Dynamic Programming", difficulty: "Hard", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/number-of-ways-to-stay-in-the-same-place-after-some-steps/", codeUrl: "https://leetcode.com/problems/number-of-ways-to-stay-in-the-same-place-after-some-steps/description/" },
{ id: 163, problem: "Count Square Submatrices with All Ones", number: 1277, category: "2D Dynamic Programming", difficulty: "Medium", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/count-square-submatrices-with-all-ones/", codeUrl: "https://leetcode.com/problems/count-square-submatrices-with-all-ones/description/" },
{ id: 164, problem: "Number of Dice Rolls With Target Sum", number: 1155, category: "1D Dynamic Programming", difficulty: "Medium", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/number-of-dice-rolls-with-target-sum/", codeUrl: "https://leetcode.com/problems/number-of-dice-rolls-with-target-sum/description/" },
{ id: 165, problem: "Profitable Schemes", number: 879, category: "2D Dynamic Programming", difficulty: "Hard", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/profitable-schemes/", codeUrl: "https://leetcode.com/problems/profitable-schemes/description/" },
{ id: 166, problem: "Frog Jump", number: 403, category: "1D Dynamic Programming", difficulty: "Hard", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/frog-jump/", codeUrl: "https://leetcode.com/problems/frog-jump/description/" },
{ id: 167, problem: "Student Attendance Record II", number: 552, category: "1D Dynamic Programming", difficulty: "Hard", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/student-attendance-record-ii/", codeUrl: "https://leetcode.com/problems/student-attendance-record-ii/description/" },
{ id: 168, problem: "Trapping Rain Water II", number: 407, category: "Heap / Priority Queue", difficulty: "Hard", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/trapping-rain-water-ii/", codeUrl: "https://leetcode.com/problems/trapping-rain-water-ii/description/" },
{ id: 169, problem: "Text Justification", number: 68, category: "Arrays & Hashing", difficulty: "Hard", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/text-justification/", codeUrl: "https://leetcode.com/problems/text-justification/description/" },
{ id: 170, problem: "Sudoku Solver", number: 37, category: "Backtracking", difficulty: "Hard", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/sudoku-solver/", codeUrl: "https://leetcode.com/problems/sudoku-solver/description/" },
{ id: 171, problem: "Robot Room Cleaner", number: 489, category: "Backtracking", difficulty: "Hard", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/robot-room-cleaner/", codeUrl: "https://leetcode.com/problems/robot-room-cleaner/description/" },
{ id: 172, problem: "Design Underground System", number: 1396, category: "Design", difficulty: "Medium", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/design-underground-system/", codeUrl: "https://leetcode.com/problems/design-underground-system/description/" },
{ id: 173, problem: "Snapshot Array", number: 1146, category: "Design", difficulty: "Medium", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/snapshot-array/", codeUrl: "https://leetcode.com/problems/snapshot-array/description/" },
{ id: 174, problem: "Sum of Two Integers", number: 371, category: "Bit Manipulation", difficulty: "Medium", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "Neetcode", leetCodeUrl: "https://leetcode.com/problems/sum-of-two-integers/", codeUrl: "https://leetcode.com/problems/sum-of-two-integers/description/" },
{ id: 175, problem: "Sliding Puzzle", number: 773, category: "Graphs", difficulty: "Hard", priority: "High-Medium", status: "Not Started", lastAttempt: "", notes: "", leetCodeUrl: "https://leetcode.com/problems/sliding-puzzle/", codeUrl: "https://leetcode.com/problems/sliding-puzzle/description/" }
];

let categories = [];
let studyPlan = [];
let currentPage = 0;
let rowsPerPage = 15;
let filteredProblems = [];
let currentUser = null;

// State for filters
let filters = {
    search: '',
    category: 'All',
    difficulty: 'All',
    priority: 'All'
};

// Stats
let stats = {
    total: 0,
    completed: 0,
    needsRevision: 0,
    notStarted: 0
};

// Status tabs
let statusCounts = {
    completed: 0,
    review: 0,
    today: 0,
    pending: 0
};

document.addEventListener('DOMContentLoaded', () => {
    // Initialize Firebase
    if (typeof firebase !== 'undefined') {
        firebase.initializeApp(firebaseConfig);
        
        // Enable Firestore persistence
        firebase.firestore().enablePersistence()
            .catch(err => console.error('Firestore persistence failed:', err));
        
        // Set up authentication
        setupAuth();
        
        // Initialize the app
        initializeApp();
        
        // Set up event listeners
        setupEventListeners();
        
        // Add custom styles
        addStyles();
        
    } else {
        console.error("Firebase SDK not loaded");
    }
});

function setupAuth() {
    const auth = firebase.auth();
    const db = firebase.firestore();
    
    auth.onAuthStateChanged(async (user) => {
        console.log('Auth state changed:', user ? user.uid : 'no user');
        
        if (user) {
            currentUser = user;
            updateUIForUser(user);
            
            try {
                await checkAndFixUserData();
                await loadUserData(db);
                initializeApp();
            } catch (error) {
                console.error('Error loading user data:', error);
                alert('There was an error loading your data. Please try refreshing the page.');
            }
        } else {
            renderSignInButton();
        }
    });
}

function initializeUserData(db, user) {
    const userRef = db.collection('users').doc(user.uid);
    
    return userRef.get().then(doc => {
        if (!doc.exists) {
            console.log('Creating new user document');
            return userRef.set({
                problems: problems,
                studyPlan: [],
                createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                lastUpdated: firebase.firestore.FieldValue.serverTimestamp(),
                email: user.email,
                displayName: user.displayName,
                photoURL: user.photoURL || ''
            }).then(() => {
                console.log('User document created successfully');
                return true;
            });
        } else {
            console.log('User document already exists');
            return true;
        }
    }).catch(error => {
        console.error('Error initializing user data:', error);
        throw error;
    });
}

function checkAndFixUserData() {
    if (!currentUser || typeof firebase === 'undefined') return;
    
    const db = firebase.firestore();
    const userRef = db.collection('users').doc(currentUser.uid);
    
    return userRef.get().then(doc => {
        if (doc.exists) {
            const data = doc.data();
            let needsFix = false;
            
            if (data.studyPlan) {
                const corruptDays = data.studyPlan.filter(day => 
                    !day.date || 
                    (!(day.date instanceof firebase.firestore.Timestamp) && 
                     !(day.date instanceof Date) && 
                     typeof day.date !== 'string' && 
                     typeof day.date !== 'number')
                );
                
                if (corruptDays.length > 0) {
                    console.warn('Found corrupt study plan entries:', corruptDays);
                    needsFix = true;
                }
            }
            
            if (needsFix) {
                console.log('Fixing corrupted data');
                return userRef.update({
                    studyPlan: []
                }).then(() => {
                    console.log('Data fixed');
                    return true;
                });
            }
            
            return false;
        }
        return false;
    }).catch(error => {
        console.error('Error checking user data:', error);
        return false;
    });
}

function updateUIForUser(user) {
    const authContainer = document.getElementById('auth-container');
    authContainer.innerHTML = `
        <div class="user-info">
            <img class="user-avatar" src="${user.photoURL || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(user.displayName || 'User')}" 
                 alt="${user.displayName || 'User'}">
            <span class="user-name">${user.displayName || user.email || 'User'}</span>
        </div>
        <button class="auth-button signout compact" id="signout-button">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            <span>Sign out</span>
        </button>
    `;
    
    document.getElementById('signout-button').addEventListener('click', () => {
        firebase.auth().signOut().then(() => {
            window.location.reload();
        });
    });
}

function renderSignInButton() {
    const authContainer = document.getElementById('auth-container');
    authContainer.innerHTML = `
        <button class="auth-button google compact" id="signin-button">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 48 48">
                <path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/>
                <path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/>
                <path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/>
                <path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/>
                <path fill="none" d="M0 0h48v48H0z"/>
            </svg>
            <span>Sign in</span>
        </button>
    `;
    
    document.getElementById('signin-button').addEventListener('click', signInWithGooglePopup);
}

async function signInWithGooglePopup() {
    try {
        const auth = firebase.auth();
        const db = firebase.firestore();
        const provider = new firebase.auth.GoogleAuthProvider();
        
        provider.addScope('profile');
        provider.addScope('email');
        
        const result = await auth.signInWithPopup(provider);
        console.log('Sign-in successful', result.user);
        
        await initializeUserData(db, result.user);
        updateUIForUser(result.user);
        window.location.reload();
        
    } catch (error) {
        console.error('Sign-in error:', error);
        
        if (error.code === 'auth/account-exists-with-different-credential') {
            alert('An account already exists with this email. Please sign in with the original method.');
        } else if (error.code === 'auth/popup-closed-by-user') {
            console.log('Sign-in popup was closed by user');
        } else {
            alert('Sign-in failed: ' + error.message);
        }
    }
}

function loadUserData(db) {
    if (!currentUser) {
        console.log('No current user, skipping data load');
        return Promise.reject('No current user');
    }
    
    console.log('Loading user data for:', currentUser.uid);
    const userRef = db.collection('users').doc(currentUser.uid);
    
    return userRef.get().then(doc => {
        if (doc.exists) {
            const data = doc.data();
            console.log('User data loaded:', data);
            
            if (data.problems) {
                problems = data.problems;
                console.log(`Loaded ${problems.length} problems`);
            }
            
            if (data.studyPlan) {
                console.log('Raw study plan from Firestore:', data.studyPlan);
                
                studyPlan = data.studyPlan.map(day => {
                    try {
                        const processedDate = day.date && day.date.toDate ? 
                            day.date.toDate() : 
                            new Date(day.date);
                            
                        console.log(`Converted date: ${day.date} -> ${processedDate}`);
                        
                        return {
                            ...day,
                            date: processedDate
                        };
                    } catch (error) {
                        console.error('Error processing date for study plan day:', day, error);
                        return {
                            ...day,
                            date: new Date()
                        };
                    }
                });
                
                console.log('Processed study plan:', studyPlan);
            }
            
            initializeApp();
            return true;
        } else {
            console.log('No user document found');
            return false;
        }
    }).catch(error => {
        console.error('Error loading user data:', error);
        throw error;
    });
}

function saveUserData() {
    if (!currentUser || typeof firebase === 'undefined') {
        console.log('Cannot save: No current user or Firebase not initialized');
        return Promise.reject('No current user or Firebase not initialized');
    }
    
    console.log('Saving user data for:', currentUser.uid);
    console.log('Study plan to save:', studyPlan);
    
    const db = firebase.firestore();
    const userRef = db.collection('users').doc(currentUser.uid);
    
    const validStudyPlan = studyPlan.map(day => {
        let validDate = day.date;
        
        if (!validDate || !(validDate instanceof Date)) {
            console.warn('Invalid date found in study plan:', day);
            validDate = new Date();
        }
        
        return {
            ...day,
            date: firebase.firestore.Timestamp.fromDate(validDate)
        };
    });
    
    console.log('Processed study plan for saving:', validStudyPlan);
    
    return userRef.set({
        problems: problems,
        studyPlan: validStudyPlan,
        lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
    }, { merge: true }).then(() => {
        console.log('User data saved successfully');
        return true;
    }).catch(error => {
        console.error('Error saving user data:', error);
        alert('Failed to save your study plan. Please try again.');
        throw error;
    });
}

function setupTabs() {
    // Main tabs (Tracker, Planner, Analytics)
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');
    
    tabButtons.forEach(button => {
        button.addEventListener('click', () => {
            const tabName = button.getAttribute('data-tab');
            
            tabButtons.forEach(btn => btn.classList.remove('active'));
            tabContents.forEach(content => content.classList.remove('active'));
            
            button.classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
            
            console.log(`Tab switched to: ${tabName}`);
            
            if (tabName === 'planner') {
                updateProblemsPerDay();
                renderTodayProblems();
                renderPendingProblems();
                renderRevisionProblems();
            }
        });
    });
    
    // Content tabs (All, Completed, Review, Today's, Pending)
    const contentTabButtons = document.querySelectorAll('.content-tab-button');
    const contentTabPanels = document.querySelectorAll('.content-tab-panel');
    
    contentTabButtons.forEach(button => {
        button.addEventListener('click', () => {
            const tabName = button.getAttribute('data-content-tab');
            
            contentTabButtons.forEach(btn => btn.classList.remove('active'));
            contentTabPanels.forEach(panel => panel.classList.remove('active'));
            
            button.classList.add('active');
            document.getElementById(`${tabName}-tab-panel`).classList.add('active');
            
            // Render the appropriate table
            if (tabName === 'all') {
                renderProblemsTable();
            } else if (tabName === 'completed') {
                renderCompletedProblems();
            } else if (tabName === 'review') {
                renderReviewProblems();
            } else if (tabName === 'today') {
                renderTodaysProblems();
            } else if (tabName === 'pending') {
                renderPendingProblemsTable();
            }
        });
    });
}

function setupEventListeners() {
    // Filter changes
    document.getElementById('search-input').addEventListener('input', handleFilterChange);
    document.getElementById('category-filter').addEventListener('change', handleFilterChange);
    document.getElementById('difficulty-filter').addEventListener('change', handleFilterChange);
    document.getElementById('priority-filter').addEventListener('change', handleFilterChange);
    
    // Pagination
    document.getElementById('prev-page').addEventListener('click', () => {
        if (currentPage > 0) {
            currentPage--;
            renderProblemsTable();
        }
    });
    
    document.getElementById('next-page').addEventListener('click', () => {
        const totalPages = Math.ceil(filteredProblems.length / rowsPerPage);
        if (currentPage < totalPages - 1) {
            currentPage++;
            renderProblemsTable();
        }
    });
    
    // Generate study plan
    const generatePlanBtn = document.getElementById('generate-plan');
    if (generatePlanBtn) {
        generatePlanBtn.addEventListener('click', () => generateStudyPlan(true));
    }
    
    // Priority checkboxes and days input
    document.getElementById('priority-high').addEventListener('change', updateProblemsPerDay);
    document.getElementById('priority-high-medium').addEventListener('change', updateProblemsPerDay);
    document.getElementById('priority-medium').addEventListener('change', updateProblemsPerDay);
    document.getElementById('plan-days').addEventListener('input', updateProblemsPerDay);
    
    // Status tabs
    const statusTabs = document.querySelectorAll('.status-tab');
    statusTabs.forEach(tab => {
        tab.addEventListener('click', () => {
            const status = tab.getAttribute('data-status');
            filterByStatus(status);
        });
    });
    
    // Add debug controls
    setTimeout(addDebugControls, 1000);
}

function initializeApp() {
    updateFilters();
    applyFilters();
    updateStats();
    updateStatusCounts();
    renderProblemsTable();
    renderAnalytics();
    updateProblemsPerDay();
    renderTodayProblems();
    renderPendingProblems();
    renderRevisionProblems();
}

function updateFilters() {
    if (!problems || problems.length === 0) return;
    
    // Get unique categories
    const uniqueCategories = [...new Set(problems.map(p => p.category))];
    const categoryFilter = document.getElementById('category-filter');
    
    if (!categoryFilter) return;
    
    while (categoryFilter.options.length > 1) {
        categoryFilter.remove(1);
    }
    
    uniqueCategories.forEach(category => {
        const option = document.createElement('option');
        option.value = category;
        option.textContent = category;
        categoryFilter.appendChild(option);
    });
    
    // Get unique difficulties
    const uniqueDifficulties = [...new Set(problems.map(p => p.difficulty))];
    const difficultyFilter = document.getElementById('difficulty-filter');
    
    while (difficultyFilter.options.length > 1) {
        difficultyFilter.remove(1);
    }
    
    uniqueDifficulties.forEach(difficulty => {
        const option = document.createElement('option');
        option.value = difficulty;
        option.textContent = difficulty;
        difficultyFilter.appendChild(option);
    });
    
    // Get unique priorities
    const uniquePriorities = [...new Set(problems.map(p => p.priority))];
    const priorityFilter = document.getElementById('priority-filter');
    
    while (priorityFilter.options.length > 1) {
        priorityFilter.remove(1);
    }
    
    uniquePriorities.forEach(priority => {
        const option = document.createElement('option');
        option.value = priority;
        option.textContent = priority;
        priorityFilter.appendChild(option);
    });
    
    categories = uniqueCategories;
}

function handleFilterChange() {
    filters.search = document.getElementById('search-input').value.toLowerCase();
    filters.category = document.getElementById('category-filter').value;
    filters.difficulty = document.getElementById('difficulty-filter').value;
    filters.priority = document.getElementById('priority-filter').value;
    
    applyFilters();
    currentPage = 0;
    renderProblemsTable();
}

function applyFilters() {
    filteredProblems = [...problems];
    
    if (filters.search) {
        filteredProblems = filteredProblems.filter(item => 
            item.problem.toLowerCase().includes(filters.search) ||
            item.number.toString().includes(filters.search) ||
            item.category.toLowerCase().includes(filters.search)
        );
    }
    
    if (filters.category !== 'All') {
        filteredProblems = filteredProblems.filter(item => item.category === filters.category);
    }
    
    if (filters.difficulty !== 'All') {
        filteredProblems = filteredProblems.filter(item => item.difficulty === filters.difficulty);
    }
    
    if (filters.priority !== 'All') {
        filteredProblems = filteredProblems.filter(item => item.priority === filters.priority);
    }
}

function updateStats() {
    stats.total = problems.length;
    stats.completed = problems.filter(p => p.status === 'Complete').length;
    stats.needsRevision = problems.filter(p => p.status === 'Needs Revision').length;
    stats.notStarted = stats.total - stats.completed - stats.needsRevision;
    
    document.getElementById('stat-total').textContent = stats.total;
    document.getElementById('stat-completed').textContent = stats.completed;
    document.getElementById('stat-needs-revision').textContent = stats.needsRevision;
    document.getElementById('stat-not-started').textContent = stats.notStarted;
    
    // Update total progress
    const progressPercentage = Math.round((stats.completed / stats.total) * 100);
    document.getElementById('total-progress').textContent = `${stats.completed}/${stats.total} (${progressPercentage}%)`;
}

function updateStatusCounts() {
    statusCounts.completed = problems.filter(p => p.status === 'Complete').length;
    statusCounts.review = problems.filter(p => p.status === 'Needs Revision').length;
    
    // Count today's problems
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    const todayPlan = studyPlan.find(day => {
        const planDate = new Date(day.date);
        planDate.setHours(0, 0, 0, 0);
        return planDate.getTime() === today.getTime();
    });
    statusCounts.today = todayPlan ? todayPlan.problems.length : 0;
    
    // Count pending problems (problems from past days that are not completed)
    statusCounts.pending = studyPlan.reduce((count, day) => {
        const planDate = new Date(day.date);
        planDate.setHours(0, 0, 0, 0);
        
        if (planDate.getTime() < today.getTime()) {
            return count + day.problems.filter(p => p.status !== 'Complete').length;
        }
        return count;
    }, 0);
    
    // Update status tab counts
    document.getElementById('completed-count').textContent = statusCounts.completed;
    document.getElementById('review-count').textContent = statusCounts.review;
    document.getElementById('today-count').textContent = statusCounts.today;
    document.getElementById('pending-count').textContent = statusCounts.pending;
    
    // Update content tab badges
    document.getElementById('completed-badge').textContent = statusCounts.completed;
    document.getElementById('review-badge').textContent = statusCounts.review;
    document.getElementById('today-badge').textContent = statusCounts.today;
    document.getElementById('pending-badge').textContent = statusCounts.pending;
}

function filterByStatus(status) {
    // Update active tab
    const statusTabs = document.querySelectorAll('.status-tab');
    statusTabs.forEach(tab => tab.classList.remove('active'));
    document.querySelector(`.status-tab[data-status="${status}"]`).classList.add('active');
    
    // Filter problems based on status
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    switch(status) {
        case 'completed':
            filteredProblems = problems.filter(p => p.status === 'Complete');
            break;
        case 'review':
            filteredProblems = problems.filter(p => p.status === 'Needs Revision');
            break;
        case 'today':
            const todayPlan = studyPlan.find(day => {
                const planDate = new Date(day.date);
                planDate.setHours(0, 0, 0, 0);
                return planDate.getTime() === today.getTime();
            });
            filteredProblems = todayPlan ? todayPlan.problems : [];
            break;
        case 'pending':
            filteredProblems = studyPlan.reduce((acc, day) => {
                const planDate = new Date(day.date);
                planDate.setHours(0, 0, 0, 0);
                
                if (planDate.getTime() < today.getTime()) {
                    return [...acc, ...day.problems.filter(p => p.status !== 'Complete')];
                }
                return acc;
            }, []);
            break;
        default:
            filteredProblems = [...problems];
    }
    
    currentPage = 0;
    renderProblemsTable();
}

function renderProblemsTable() {
    const tableBody = document.getElementById('problems-table-body');
    if (!tableBody) return;
    
    tableBody.innerHTML = '';
    
    const totalPages = Math.ceil(filteredProblems.length / rowsPerPage);
    const startIndex = currentPage * rowsPerPage;
    const endIndex = Math.min(startIndex + rowsPerPage, filteredProblems.length);
    const paginatedProblems = filteredProblems.slice(startIndex, endIndex);
    
    paginatedProblems.forEach((problem, index) => {
        const row = document.createElement('tr');
        
        // ID column
        const idCell = document.createElement('td');
        idCell.textContent = problem.id;
        row.appendChild(idCell);
        
        // Problem column
        const problemCell = document.createElement('td');
        const problemLink = document.createElement('a');
        problemLink.href = problem.leetCodeUrl;
        problemLink.target = '_blank';
        problemLink.rel = 'noopener noreferrer';
        problemLink.textContent = problem.problem;
        problemCell.appendChild(problemLink);
        row.appendChild(problemCell);
        
        // Category column
        const categoryCell = document.createElement('td');
        categoryCell.textContent = problem.category;
        row.appendChild(categoryCell);
        
        // Difficulty column
        const difficultyCell = document.createElement('td');
        difficultyCell.classList.add(problem.difficulty.toLowerCase());
        difficultyCell.textContent = problem.difficulty;
        row.appendChild(difficultyCell);
        
        // Priority column
        const priorityCell = document.createElement('td');
        priorityCell.textContent = problem.priority;
        row.appendChild(priorityCell);
        
        // Last Attempt column
        const lastAttemptCell = document.createElement('td');
        lastAttemptCell.textContent = problem.lastAttempt || '-';
        row.appendChild(lastAttemptCell);
        
        // Actions column
        const actionsCell = document.createElement('td');
        const actionsDiv = document.createElement('div');
        actionsDiv.style.display = 'flex';
        actionsDiv.style.gap = '4px';
        
        // Complete button
        const completeBtn = document.createElement('button');
        completeBtn.classList.add('icon-button');
        completeBtn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--green);"><polyline points="20 6 9 17 4 12"></polyline></svg>';
        completeBtn.title = 'Mark Complete';
        completeBtn.addEventListener('click', () => updateProblemStatus(problem.id, 'Complete'));
        actionsDiv.appendChild(completeBtn);
        
        // Needs Revision button
        const needsRevisionBtn = document.createElement('button');
        needsRevisionBtn.classList.add('icon-button');
        needsRevisionBtn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--orange);"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>';
        needsRevisionBtn.title = 'Mark Needs Revision';
        needsRevisionBtn.addEventListener('click', () => updateProblemStatus(problem.id, 'Needs Revision'));
        actionsDiv.appendChild(needsRevisionBtn);
        
        // Code button
        const codeBtn = document.createElement('a');
        codeBtn.classList.add('icon-button');
        codeBtn.href = problem.leetCodeUrl + 'description/';
        codeBtn.target = '_blank';
        codeBtn.rel = 'noopener noreferrer';
        codeBtn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--blue);"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>';
        codeBtn.title = 'View Problem Code';
        actionsDiv.appendChild(codeBtn);
        
        actionsCell.appendChild(actionsDiv);
        row.appendChild(actionsCell);
        
        tableBody.appendChild(row);
    });
    
    // Update pagination info
    const paginationInfo = document.getElementById('pagination-info');
    const pageInfo = document.getElementById('page-info');
    const prevPageBtn = document.getElementById('prev-page');
    const nextPageBtn = document.getElementById('next-page');
    
    if (paginationInfo && pageInfo && prevPageBtn && nextPageBtn) {
        paginationInfo.textContent = `Showing ${startIndex + 1}-${endIndex} of ${filteredProblems.length}`;
        pageInfo.textContent = `${currentPage + 1} / ${Math.max(1, totalPages)}`;
        
        prevPageBtn.classList.toggle('btn-disabled', currentPage === 0);
        prevPageBtn.classList.toggle('btn-primary', currentPage > 0);
        nextPageBtn.classList.toggle('btn-disabled', currentPage >= totalPages - 1);
        nextPageBtn.classList.toggle('btn-primary', currentPage < totalPages - 1);
    }
}

function renderCompletedProblems() {
    const tableBody = document.getElementById('completed-problems-body');
    if (!tableBody) return;
    
    tableBody.innerHTML = '';
    
    const completedProblems = problems.filter(p => p.status === 'Complete');
    
    completedProblems.forEach(problem => {
        const row = document.createElement('tr');
        
        // ID column
        const idCell = document.createElement('td');
        idCell.textContent = problem.id;
        row.appendChild(idCell);
        
        // Problem column
        const problemCell = document.createElement('td');
        const problemLink = document.createElement('a');
        problemLink.href = problem.leetCodeUrl;
        problemLink.target = '_blank';
        problemLink.rel = 'noopener noreferrer';
        problemLink.textContent = problem.problem;
        problemCell.appendChild(problemLink);
        row.appendChild(problemCell);
        
        // Category column
        const categoryCell = document.createElement('td');
        categoryCell.textContent = problem.category;
        row.appendChild(categoryCell);
        
        // Difficulty column
        const difficultyCell = document.createElement('td');
        difficultyCell.classList.add(problem.difficulty.toLowerCase());
        difficultyCell.textContent = problem.difficulty;
        row.appendChild(difficultyCell);
        
        // Last Attempt column
        const lastAttemptCell = document.createElement('td');
        lastAttemptCell.textContent = problem.lastAttempt || '-';
        row.appendChild(lastAttemptCell);
        
        // Actions column
        const actionsCell = document.createElement('td');
        const actionsDiv = document.createElement('div');
        actionsDiv.style.display = 'flex';
        actionsDiv.style.gap = '4px';
        
        // Needs Revision button
        const needsRevisionBtn = document.createElement('button');
        needsRevisionBtn.classList.add('icon-button');
        needsRevisionBtn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--orange);"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>';
        needsRevisionBtn.title = 'Mark Needs Revision';
        needsRevisionBtn.addEventListener('click', () => updateProblemStatus(problem.id, 'Needs Revision'));
        actionsDiv.appendChild(needsRevisionBtn);
        
        // Code button
        const codeBtn = document.createElement('a');
        codeBtn.classList.add('icon-button');
        codeBtn.href = problem.leetCodeUrl + 'description/';
        codeBtn.target = '_blank';
        codeBtn.rel = 'noopener noreferrer';
        codeBtn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--blue);"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>';
        codeBtn.title = 'View Problem Code';
        actionsDiv.appendChild(codeBtn);
        
        actionsCell.appendChild(actionsDiv);
        row.appendChild(actionsCell);
        
        tableBody.appendChild(row);
    });
}

function renderReviewProblems() {
    const tableBody = document.getElementById('review-problems-body');
    if (!tableBody) return;
    
    tableBody.innerHTML = '';
    
    const reviewProblems = problems.filter(p => p.status === 'Needs Revision');
    
    reviewProblems.forEach(problem => {
        const row = document.createElement('tr');
        
        // ID column
        const idCell = document.createElement('td');
        idCell.textContent = problem.id;
        row.appendChild(idCell);
        
        // Problem column
        const problemCell = document.createElement('td');
        const problemLink = document.createElement('a');
        problemLink.href = problem.leetCodeUrl;
        problemLink.target = '_blank';
        problemLink.rel = 'noopener noreferrer';
        problemLink.textContent = problem.problem;
        problemCell.appendChild(problemLink);
        row.appendChild(problemCell);
        
        // Category column
        const categoryCell = document.createElement('td');
        categoryCell.textContent = problem.category;
        row.appendChild(categoryCell);
        
        // Difficulty column
        const difficultyCell = document.createElement('td');
        difficultyCell.classList.add(problem.difficulty.toLowerCase());
        difficultyCell.textContent = problem.difficulty;
        row.appendChild(difficultyCell);
        
        // Last Attempt column
        const lastAttemptCell = document.createElement('td');
        lastAttemptCell.textContent = problem.lastAttempt || '-';
        row.appendChild(lastAttemptCell);
        
        // Actions column
        const actionsCell = document.createElement('td');
        const actionsDiv = document.createElement('div');
        actionsDiv.style.display = 'flex';
        actionsDiv.style.gap = '4px';
        
        // Complete button
        const completeBtn = document.createElement('button');
        completeBtn.classList.add('icon-button');
        completeBtn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--green);"><polyline points="20 6 9 17 4 12"></polyline></svg>';
        completeBtn.title = 'Mark Complete';
        completeBtn.addEventListener('click', () => updateProblemStatus(problem.id, 'Complete'));
        actionsDiv.appendChild(completeBtn);
        
        // Code button
        const codeBtn = document.createElement('a');
        codeBtn.classList.add('icon-button');
        codeBtn.href = problem.leetCodeUrl + 'description/';
        codeBtn.target = '_blank';
        codeBtn.rel = 'noopener noreferrer';
        codeBtn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--blue);"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>';
        codeBtn.title = 'View Problem Code';
        actionsDiv.appendChild(codeBtn);
        
        actionsCell.appendChild(actionsDiv);
        row.appendChild(actionsCell);
        
        tableBody.appendChild(row);
    });
}

function renderTodaysProblems() {
    const tableBody = document.getElementById('today-problems-body');
    if (!tableBody) return;
    
    tableBody.innerHTML = '';
    
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    let todayProblems = [];
    const todayPlan = studyPlan.find(day => {
        const planDate = new Date(day.date);
        planDate.setHours(0, 0, 0, 0);
        return planDate.getTime() === today.getTime();
    });
    
    if (todayPlan) {
        todayProblems = todayPlan.problems;
    }
    
    todayProblems.forEach(problem => {
        const row = document.createElement('tr');
        
        // ID column
        const idCell = document.createElement('td');
        idCell.textContent = problem.id;
        row.appendChild(idCell);
        
        // Problem column
        const problemCell = document.createElement('td');
        const problemLink = document.createElement('a');
        problemLink.href = problem.leetCodeUrl;
        problemLink.target = '_blank';
        problemLink.rel = 'noopener noreferrer';
        problemLink.textContent = problem.problem;
        problemCell.appendChild(problemLink);
        row.appendChild(problemCell);
        
        // Category column
        const categoryCell = document.createElement('td');
        categoryCell.textContent = problem.category;
        row.appendChild(categoryCell);
        
        // Difficulty column
        const difficultyCell = document.createElement('td');
        difficultyCell.classList.add(problem.difficulty.toLowerCase());
        difficultyCell.textContent = problem.difficulty;
        row.appendChild(difficultyCell);
        
        // Status column
        const statusCell = document.createElement('td');
        const statusBadge = document.createElement('span');
        statusBadge.className = 'status-badge';
        
        const statusDot = document.createElement('span');
        statusDot.className = `status-dot status-${problem.status.toLowerCase().replace(' ', '-')}`;
        statusBadge.appendChild(statusDot);
        
        statusBadge.appendChild(document.createTextNode(problem.status));
        statusCell.appendChild(statusBadge);
        row.appendChild(statusCell);
        
        // Actions column
        const actionsCell = document.createElement('td');
        const actionsDiv = document.createElement('div');
        actionsDiv.style.display = 'flex';
        actionsDiv.style.gap = '4px';
        
        // Complete button
        const completeBtn = document.createElement('button');
        completeBtn.classList.add('icon-button');
        completeBtn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--green);"><polyline points="20 6 9 17 4 12"></polyline></svg>';
        completeBtn.title = 'Mark Complete';
        completeBtn.addEventListener('click', () => updateProblemStatus(problem.id, 'Complete'));
        actionsDiv.appendChild(completeBtn);
        
        // Needs Revision button
        const needsRevisionBtn = document.createElement('button');
        needsRevisionBtn.classList.add('icon-button');
        needsRevisionBtn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--orange);"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>';
        needsRevisionBtn.title = 'Mark Needs Revision';
        needsRevisionBtn.addEventListener('click', () => updateProblemStatus(problem.id, 'Needs Revision'));
        actionsDiv.appendChild(needsRevisionBtn);
        
        // Code button
        const codeBtn = document.createElement('a');
        codeBtn.classList.add('icon-button');
        codeBtn.href = problem.leetCodeUrl + 'description/';
        codeBtn.target = '_blank';
        codeBtn.rel = 'noopener noreferrer';
        codeBtn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--blue);"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>';
        codeBtn.title = 'View Problem Code';
        actionsDiv.appendChild(codeBtn);
        
        actionsCell.appendChild(actionsDiv);
        row.appendChild(actionsCell);
        
        tableBody.appendChild(row);
    });
}

function renderPendingProblemsTable() {
    const tableBody = document.getElementById('pending-problems-body');
    if (!tableBody) return;
    
    tableBody.innerHTML = '';
    
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    const pendingProblems = studyPlan.reduce((acc, day) => {
        const planDate = new Date(day.date);
        planDate.setHours(0, 0, 0, 0);
        
        if (planDate.getTime() < today.getTime()) {
            return [...acc, ...day.problems.filter(p => p.status !== 'Complete')];
        }
        return acc;
    }, []);
    
    pendingProblems.forEach(problem => {
        const row = document.createElement('tr');
        
        // ID column
        const idCell = document.createElement('td');
        idCell.textContent = problem.id;
        row.appendChild(idCell);
        
        // Problem column
        const problemCell = document.createElement('td');
        const problemLink = document.createElement('a');
        problemLink.href = problem.leetCodeUrl;
        problemLink.target = '_blank';
        problemLink.rel = 'noopener noreferrer';
        problemLink.textContent = problem.problem;
        problemCell.appendChild(problemLink);
        row.appendChild(problemCell);
        
        // Category column
        const categoryCell = document.createElement('td');
        categoryCell.textContent = problem.category;
        row.appendChild(categoryCell);
        
        // Difficulty column
        const difficultyCell = document.createElement('td');
        difficultyCell.classList.add(problem.difficulty.toLowerCase());
        difficultyCell.textContent = problem.difficulty;
        row.appendChild(difficultyCell);
        
        // Scheduled column
        const scheduledCell = document.createElement('td');
        const scheduledDay = studyPlan.find(day => 
            day.problems.some(p => p.id === problem.id)
        );
        scheduledCell.textContent = scheduledDay ? new Date(scheduledDay.date).toLocaleDateString() : '-';
        row.appendChild(scheduledCell);
        
        // Actions column
        const actionsCell = document.createElement('td');
        const actionsDiv = document.createElement('div');
        actionsDiv.style.display = 'flex';
        actionsDiv.style.gap = '4px';
        
        // Complete button
        const completeBtn = document.createElement('button');
        completeBtn.classList.add('icon-button');
        completeBtn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--green);"><polyline points="20 6 9 17 4 12"></polyline></svg>';
        completeBtn.title = 'Mark Complete';
        completeBtn.addEventListener('click', () => updateProblemStatus(problem.id, 'Complete'));
        actionsDiv.appendChild(completeBtn);
        
        // Needs Revision button
        const needsRevisionBtn = document.createElement('button');
        needsRevisionBtn.classList.add('icon-button');
        needsRevisionBtn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--orange);"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>';
        needsRevisionBtn.title = 'Mark Needs Revision';
        needsRevisionBtn.addEventListener('click', () => updateProblemStatus(problem.id, 'Needs Revision'));
        actionsDiv.appendChild(needsRevisionBtn);
        
        // Code button
        const codeBtn = document.createElement('a');
        codeBtn.classList.add('icon-button');
        codeBtn.href = problem.leetCodeUrl + 'description/';
        codeBtn.target = '_blank';
        codeBtn.rel = 'noopener noreferrer';
        codeBtn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--blue);"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>';
        codeBtn.title = 'View Problem Code';
        actionsDiv.appendChild(codeBtn);
        
        actionsCell.appendChild(actionsDiv);
        row.appendChild(actionsCell);
        
        tableBody.appendChild(row);
    });
}

function updateProblemStatus(id, status) {
    const now = new Date();
    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
    
    problems = problems.map(problem => {
        if (problem.id === id) {
            const updatedProblem = {
                ...problem, 
                status, 
                lastAttempt: status !== 'Not Started' ? today.toLocaleDateString() : ''
            };
            
            if (status === 'Complete') {
                updatedProblem.completedDate = today;
                const firstRevisionEl = document.getElementById('first-revision');
                const secondRevisionEl = document.getElementById('second-revision');
                
                if (firstRevisionEl && secondRevisionEl) {
                    updatedProblem.revisionDates = [
                        new Date(today.getTime() + parseInt(firstRevisionEl.value) * 24 * 60 * 60 * 1000),
                        new Date(today.getTime() + parseInt(secondRevisionEl.value) * 24 * 60 * 60 * 1000)
                    ];
                } else {
                    updatedProblem.revisionDates = [
                        new Date(today.getTime() + 5 * 24 * 60 * 60 * 1000),
                        new Date(today.getTime() + 14 * 24 * 60 * 60 * 1000)
                    ];
                }
            }
            
            return updatedProblem;
        }
        return problem;
    });
    
    updateStats();
    updateStatusCounts();
    applyFilters();
    renderProblemsTable();
    renderAnalytics();
    renderTodayProblems();
    renderPendingProblems();
    renderRevisionProblems();
    
    saveUserData();
}

function updateProblemsPerDay() {
    const highChecked = document.getElementById('priority-high').checked;
    const highMediumChecked = document.getElementById('priority-high-medium').checked;
    const mediumChecked = document.getElementById('priority-medium').checked;
    
    let highCount = 0;
    let highMediumCount = 0;
    let mediumCount = 0;
    
    if (highChecked) {
        highCount = problems.filter(p => p.priority === 'High' && (p.status === 'Not Started' || p.status === 'In Progress')).length;
    }
    
    if (highMediumChecked) {
        highMediumCount = problems.filter(p => p.priority === 'High-Medium' && (p.status === 'Not Started' || p.status === 'In Progress')).length;
    }
    
    if (mediumChecked) {
        mediumCount = problems.filter(p => p.priority === 'Medium' && (p.status === 'Not Started' || p.status === 'In Progress')).length;
    }
    
    const totalSelected = highCount + highMediumCount + mediumCount;
    const days = parseInt(document.getElementById('plan-days').value) || 1;
    
    document.getElementById('high-count').textContent = highChecked ? highCount : 'Not selected';
    document.getElementById('high-medium-count').textContent = highMediumChecked ? highMediumCount : 'Not selected';
    document.getElementById('medium-count').textContent = mediumChecked ? mediumCount : 'Not selected';
    document.getElementById('total-selected').textContent = totalSelected;
    
    const problemsPerDay = Math.ceil(totalSelected / days);
    const problemsPerDayInput = document.getElementById('problems-per-day');
    problemsPerDayInput.value = problemsPerDay > 0 ? problemsPerDay : 0;
}

function generateStudyPlan(forceRegenerate = false) {
    if (studyPlan.length > 0 && !forceRegenerate) {
        console.log('Study plan already exists. Rendering existing plan.');
        renderTodayProblems();
        renderPendingProblems();
        renderRevisionProblems();
        return;
    }
    
    const planDaysEl = document.getElementById('plan-days');
    const problemsPerDayEl = document.getElementById('problems-per-day');
    
    if (!planDaysEl || !problemsPerDayEl) {
        console.error('Required elements not found');
        return;
    }
    
    const numDays = parseInt(planDaysEl.value) || 30;
    const problemsPerDay = parseInt(problemsPerDayEl.value) || 3;
    
    const selectedPriorities = [];
    const highEl = document.getElementById('priority-high');
    const highMediumEl = document.getElementById('priority-high-medium');
    const mediumEl = document.getElementById('priority-medium');
    
    if (highEl && highEl.checked) selectedPriorities.push('High');
    if (highMediumEl && highMediumEl.checked) selectedPriorities.push('High-Medium');
    if (mediumEl && mediumEl.checked) selectedPriorities.push('Medium');
    
    if (selectedPriorities.length === 0) {
        alert('Please select at least one priority level');
        return;
    }
    
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    console.log('Generating study plan from:', today);
    console.log('Days:', numDays, 'Problems per day:', problemsPerDay);
    console.log('Selected priorities:', selectedPriorities);
    
    studyPlan = [];
    
    const availableProblems = problems.filter(p => 
        (p.status === 'Not Started' || p.status === 'In Progress') &&
        selectedPriorities.includes(p.priority)
    );
    
    console.log(`Found ${availableProblems.length} available problems matching criteria`);
    
    if (availableProblems.length === 0) {
        alert('No problems found matching the selected priorities.');
        return;
    }
    
    const sortedProblems = [...availableProblems].sort((a, b) => {
        const priorityOrder = { 'High': 0, 'High-Medium': 1, 'Medium': 2 };
        const priorityDiff = priorityOrder[a.priority] - priorityOrder[b.priority];
        
        if (priorityDiff !== 0) return priorityDiff;
        
        if (a.status === 'In Progress' && b.status !== 'In Progress') return -1;
        if (a.status !== 'In Progress' && b.status === 'In Progress') return 1;
        
        const difficultyOrder = { 'Easy': 0, 'Medium': 1, 'Hard': 2 };
        return difficultyOrder[a.difficulty] - difficultyOrder[b.difficulty];
    });
    
    const problemsCopy = JSON.parse(JSON.stringify(sortedProblems));
    let problemIndex = 0;
    
    for (let i = 0; i < numDays && problemIndex < problemsCopy.length; i++) {
        const planDate = new Date(today);
        planDate.setDate(today.getDate() + i);
        planDate.setHours(0, 0, 0, 0);
        
        const dayProblems = [];
        
        for (let j = 0; j < problemsPerDay && problemIndex < problemsCopy.length; j++) {
            dayProblems.push(problemsCopy[problemIndex]);
            problemIndex++;
        }
        
        if (dayProblems.length === 0) continue;
        
        const dayCategories = [...new Set(dayProblems.map(p => p.category))];
        
        studyPlan.push({
            day: i,
            date: new Date(planDate.getTime()),
            problems: dayProblems,
            categories: dayCategories,
            focus: dayCategories.join(', ')
        });
    }
    
    console.log(`Generated ${studyPlan.length} study days`);
    
    renderTodayProblems();
    renderPendingProblems();
    renderRevisionProblems();
    updateStatusCounts();
    
    saveUserData()
        .then(() => {
            alert('Study plan generated and saved successfully!');
        })
        .catch(error => {
            console.error('Failed to save study plan:', error);
            alert('Study plan generated but there was an error saving to the database. Your changes may not persist after refreshing the page.');
        });
}

function createProblemItem(problem) {
    const item = document.createElement('li');
    item.className = 'problem-item';
    
    const problemInfo = document.createElement('div');
    problemInfo.className = 'problem-info';
    
    const problemTitle = document.createElement('div');
    problemTitle.className = 'problem-title';
    const problemLink = document.createElement('a');
    problemLink.href = problem.leetCodeUrl;
    problemLink.target = '_blank';
    problemLink.rel = 'noopener noreferrer';
    problemLink.textContent = problem.problem;
    problemTitle.appendChild(problemLink);
    problemInfo.appendChild(problemTitle);
    
    const problemMeta = document.createElement('div');
    problemMeta.className = 'problem-meta';
    problemMeta.innerHTML = `
        ${problem.category} - 
        <span class="${problem.difficulty.toLowerCase()}">${problem.difficulty}</span>
        ${problem.status !== 'Not Started' ? 
            `<span class="status-badge">
            <span class="status-dot status-${problem.status.toLowerCase().replace(' ', '-')}"></span>
            ${problem.status}
            </span>` : ''}
    `;
    problemInfo.appendChild(problemMeta);
    
    item.appendChild(problemInfo);
    
    const problemActions = document.createElement('div');
    problemActions.className = 'problem-actions';
    
    const completeBtn = document.createElement('button');
    completeBtn.className = 'icon-button';
    completeBtn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--green);"><polyline points="20 6 9 17 4 12"></polyline></svg>';
    completeBtn.title = 'Mark Complete';
    completeBtn.addEventListener('click', () => updateProblemStatus(problem.id, 'Complete'));
    problemActions.appendChild(completeBtn);
    
    const needsRevisionBtn = document.createElement('button');
    needsRevisionBtn.className = 'icon-button';
    needsRevisionBtn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--orange);"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>';
    needsRevisionBtn.title = 'Mark Needs Revision';
    needsRevisionBtn.addEventListener('click', () => updateProblemStatus(problem.id, 'Needs Revision'));
    problemActions.appendChild(needsRevisionBtn);
    
    const codeBtn = document.createElement('a');
    codeBtn.className = 'icon-button';
    codeBtn.href = problem.leetCodeUrl + 'description/';
    codeBtn.target = '_blank';
    codeBtn.rel = 'noopener noreferrer';
    codeBtn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--blue);"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>';
    codeBtn.title = 'View Problem Code';
    problemActions.appendChild(codeBtn);
    
    item.appendChild(problemActions);
    
    return item;
}

function renderTodayProblems() {
    const todayContainer = document.getElementById('today-problems');
    if (!todayContainer) return;
    
    todayContainer.innerHTML = '';
    
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    let todayProblems = [];
    const todayPlan = studyPlan.find(day => {
        const planDate = new Date(day.date);
        planDate.setHours(0, 0, 0, 0);
        return planDate.getTime() === today.getTime();
    });
    
    if (todayPlan) {
        todayProblems = todayPlan.problems;
    }
    
    if (todayProblems.length > 0) {
        todayProblems.forEach(problem => {
            const problemItem = createProblemItem(problem);
            todayContainer.appendChild(problemItem);
        });
    } else {
        todayContainer.innerHTML = '<div class="problem-item">No problems scheduled for today.</div>';
    }
}

function renderPendingProblems() {
    const pendingContainer = document.getElementById('pending-problems');
    if (!pendingContainer) return;
    
    pendingContainer.innerHTML = '';
    
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    const pendingProblems = [];
    
    studyPlan.forEach(day => {
        const planDate = new Date(day.date);
        planDate.setHours(0, 0, 0, 0);
        
        if (planDate.getTime() < today.getTime()) {
            day.problems.forEach(problem => {
                if (problem.status === 'Not Started') {
                    pendingProblems.push(problem);
                }
            });
        }
    });
    
    if (pendingProblems.length > 0) {
        pendingProblems.forEach(problem => {
            const problemItem = createProblemItem(problem);
            pendingContainer.appendChild(problemItem);
        });
    } else {
        pendingContainer.innerHTML = '<div class="problem-item">No pending problems. You\'re all caught up!</div>';
    }
}

function renderRevisionProblems() {
    const revisionContainer = document.getElementById('revision-problems');
    if (!revisionContainer) return;
    
    revisionContainer.innerHTML = '';
    
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    const revisionProblems = problems.filter(problem => {
        if (problem.status === 'Complete' && problem.revisionDates) {
            return problem.revisionDates.some(date => {
                if (!date) return false;
                const revisionDate = new Date(date);
                revisionDate.setHours(0, 0, 0, 0);
                return revisionDate.getTime() === today.getTime();
            });
        }
        return false;
    });
    
    if (revisionProblems.length > 0) {
        revisionProblems.forEach(problem => {
            const revisedProblem = {
                ...problem,
                status: 'Needs Revision'
            };
            
            const problemItem = createProblemItem(revisedProblem);
            revisionContainer.appendChild(problemItem);
        });
    } else {
        revisionContainer.innerHTML = '<div class="problem-item">No problems need revision today.</div>';
    }
}

function renderAnalytics() {
    renderCategoryProgress();
    renderDifficultyProgress();
    renderPriorityProgress();
    renderEstimatedCompletion();
}

function renderCategoryProgress() {
    const categoryContainer = document.getElementById('category-progress');
    if (!categoryContainer) return;
    
    categoryContainer.innerHTML = '';
    
    const categoryStats = {};
    
    categories.forEach(category => {
        const problemsInCategory = problems.filter(p => p.category === category);
        const completed = problemsInCategory.filter(p => p.status === 'Complete').length;
        
        categoryStats[category] = {
            total: problemsInCategory.length,
            completed: completed,
            percentage: problemsInCategory.length > 0 
                ? Math.round((completed / problemsInCategory.length) * 100) 
                : 0
        };
    });
    
    Object.entries(categoryStats).forEach(([category, stats]) => {
        const progressContainer = document.createElement('div');
        progressContainer.className = 'progress-container';
        
        const progressHeader = document.createElement('div');
        progressHeader.className = 'progress-header';
        
        const categoryLabel = document.createElement('span');
        categoryLabel.textContent = category;
        progressHeader.appendChild(categoryLabel);
        
        const statsLabel = document.createElement('span');
        statsLabel.textContent = `${stats.completed}/${stats.total} (${stats.percentage}%)`;
        progressHeader.appendChild(statsLabel);
        
        progressContainer.appendChild(progressHeader);
        
        const progressBar = document.createElement('div');
        progressBar.className = 'progress-bar';
        
        const progressFill = document.createElement('div');
        progressFill.className = 'progress-fill';
        progressFill.style.width = `${stats.percentage}%`;
        progressBar.appendChild(progressFill);
        
        progressContainer.appendChild(progressBar);
        categoryContainer.appendChild(progressContainer);
    });
}

function renderDifficultyProgress() {
    const difficultyContainer = document.getElementById('difficulty-progress');
    if (!difficultyContainer) return;
    
    difficultyContainer.innerHTML = '';
    
    const difficulties = ['Easy', 'Medium', 'Hard'];
    const difficultyStats = {};
    
    difficulties.forEach(difficulty => {
        const problemsWithDifficulty = problems.filter(p => p.difficulty === difficulty);
        const completed = problemsWithDifficulty.filter(p => p.status === 'Complete').length;
        
        difficultyStats[difficulty] = {
            total: problemsWithDifficulty.length,
            completed: completed,
            percentage: problemsWithDifficulty.length > 0 
                ? Math.round((completed / problemsWithDifficulty.length) * 100) 
                : 0
        };
    });
    
    Object.entries(difficultyStats).forEach(([difficulty, stats]) => {
        const progressContainer = document.createElement('div');
        progressContainer.className = 'progress-container';
        
        const progressHeader = document.createElement('div');
        progressHeader.className = 'progress-header';
        
        const difficultyLabel = document.createElement('span');
        difficultyLabel.textContent = difficulty;
        difficultyLabel.className = difficulty.toLowerCase();
        progressHeader.appendChild(difficultyLabel);
        
        const statsLabel = document.createElement('span');
        statsLabel.textContent = `${stats.completed}/${stats.total} (${stats.percentage}%)`;
        progressHeader.appendChild(statsLabel);
        
        progressContainer.appendChild(progressHeader);
        
        const progressBar = document.createElement('div');
        progressBar.className = 'progress-bar';
        
        const progressFill = document.createElement('div');
        progressFill.className = 'progress-fill';
        progressFill.style.width = `${stats.percentage}%`;
        
        if (difficulty === 'Easy') {
            progressFill.style.backgroundColor = 'var(--green)';
        } else if (difficulty === 'Medium') {
            progressFill.style.backgroundColor = 'var(--yellow)';
        } else {
            progressFill.style.backgroundColor = 'var(--red)';
        }
        
        progressBar.appendChild(progressFill);
        
        progressContainer.appendChild(progressBar);
        difficultyContainer.appendChild(progressContainer);
    });
}

function renderPriorityProgress() {
    const priorityContainer = document.getElementById('priority-progress');
    if (!priorityContainer) return;
    
    priorityContainer.innerHTML = '';
    
    const priorities = ['High', 'High-Medium', 'Medium'];
    const priorityStats = {};
    
    priorities.forEach(priority => {
        const problemsWithPriority = problems.filter(p => p.priority === priority);
        const completed = problemsWithPriority.filter(p => p.status === 'Complete').length;
        
        priorityStats[priority] = {
            total: problemsWithPriority.length,
            completed: completed,
            percentage: problemsWithPriority.length > 0 
                ? Math.round((completed / problemsWithPriority.length) * 100) 
                : 0
        };
    });
    
    Object.entries(priorityStats).forEach(([priority, stats]) => {
        const progressContainer = document.createElement('div');
        progressContainer.className = 'progress-container';
        
        const progressHeader = document.createElement('div');
        progressHeader.className = 'progress-header';
        
        const priorityLabel = document.createElement('span');
        priorityLabel.textContent = `${priority} Priority (${stats.total})`;
        progressHeader.appendChild(priorityLabel);
        
        const statsLabel = document.createElement('span');
        statsLabel.textContent = `${stats.completed}/${stats.total} (${stats.percentage}%)`;
        progressHeader.appendChild(statsLabel);
        
        progressContainer.appendChild(progressHeader);
        
        const progressBar = document.createElement('div');
        progressBar.className = 'progress-bar';
        
        const progressFill = document.createElement('div');
        progressFill.className = 'progress-fill';
        progressFill.style.width = `${stats.percentage}%`;
        
        if (priority === 'High') {
            progressFill.style.backgroundColor = 'var(--red)';
        } else if (priority === 'High-Medium') {
            progressFill.style.backgroundColor = 'var(--orange)';
        } else {
            progressFill.style.backgroundColor = 'var(--yellow)';
        }
        
        progressBar.appendChild(progressFill);
        
        progressContainer.appendChild(progressBar);
        priorityContainer.appendChild(progressContainer);
    });
}

function renderEstimatedCompletion() {
    const overallProgressPercentage = document.getElementById('overall-progress-percentage');
    const overallProgressBar = document.getElementById('overall-progress-bar');
    const estimatedDaysEl = document.getElementById('estimated-days');
    const statusCompletePercentage = document.getElementById('status-complete-percentage');
    const statusNeedsRevisionPercentage = document.getElementById('status-needs-revision-percentage');
    const statusNotStartedPercentage = document.getElementById('status-not-started-percentage');
    
    if (!overallProgressPercentage || !overallProgressBar) return;
    
    const completionPercentage = Math.round((stats.completed / stats.total) * 100);
    
    overallProgressPercentage.textContent = `${completionPercentage}%`;
    overallProgressBar.style.width = `${completionPercentage}%`;
    
    let estimatedDays = "N/A (no progress yet)";
    const problemsPerDayEl = document.getElementById('problems-per-day');
    
    if (problemsPerDayEl) {
        const problemsPerDay = parseInt(problemsPerDayEl.value) || 3;
        
        if (stats.completed > 0 && problemsPerDay > 0) {
            const remainingProblems = stats.total - stats.completed;
            const days = Math.ceil(remainingProblems / problemsPerDay);
            estimatedDays = `${days} days remaining (${problemsPerDay} problems/day)`;
        }
    }
    
    if (estimatedDaysEl) {
        estimatedDaysEl.textContent = `Est. ${estimatedDays}`;
    }
    
    if (statusCompletePercentage) {
        statusCompletePercentage.textContent = `${Math.round((stats.completed / stats.total) * 100)}%`;
    }
    
    if (statusNeedsRevisionPercentage) {
        statusNeedsRevisionPercentage.textContent = `${Math.round((stats.needsRevision / stats.total) * 100)}%`;
    }
    
    if (statusNotStartedPercentage) {
        statusNotStartedPercentage.textContent = `${Math.round((stats.notStarted / stats.total) * 100)}%`;
    }
}

function addStyles() {
    const styleElement = document.createElement('style');
    styleElement.textContent = `
        /* Improved Auth Buttons */
        .auth-button {
            padding: 10px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            text-transform: none;
            letter-spacing: 0.2px;
        }
        
        .auth-button.google {
            background-color: #2d3748;
            color: white;
            border: 1px solid #4a5568;
        }
        
        .auth-button.google:hover {
            background-color: #4a5568;
            transform: translateY(-1px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        
        .auth-button.google:active {
            transform: translateY(0);
            box-shadow: 0 2px 3px rgba(0,0,0,0.2);
        }
        
        /* Compact button style */
        .auth-button.compact {
            padding: 8px 12px;
        }
        
        .auth-button.signout {
            background-color: #c53030;
            color: white;
            font-weight: 500;
        }
        
        .auth-button.signout:hover {
            background-color: #e53e3e;
            transform: translateY(-1px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        
        .auth-button.signout:active {
            background-color: #c53030;
            transform: translateY(0);
            box-shadow: 0 2px 3px rgba(0,0,0,0.2);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-right: 12px;
            background: #2d3748;
            padding: 5px 10px;
            border-radius: 20px;
            border: 1px solid #4a5568;
        }
        
        .user-avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--blue);
        }
        
        .user-name {
            font-size: 14px;
            color: var(--text-primary);
            font-weight: 500;
        }
        
        .auth-container {
            display: flex;
            align-items: center;
        }
    `;
    document.head.appendChild(styleElement);
}

function debugState() {
    console.log('Current user:', currentUser ? currentUser.uid : 'No user');
    console.log('Problems count:', problems.length);
    console.log('Study plan days:', studyPlan.length);
    
    if (studyPlan.length > 0) {
        console.log('Study plan date checks:');
        studyPlan.forEach((day, index) => {
            const validDate = day.date instanceof Date && !isNaN(day.date.getTime());
            console.log(`Day ${index}: date=${day.date}, valid=${validDate}`);
            
            if (!validDate) {
                console.warn('Invalid date found:', day.date);
            }
        });
    }
    
    alert(`Debug info logged to console.\nUser: ${currentUser ? 'Logged in' : 'Not logged in'}\nProblems: ${problems.length}\nStudy Plan Days: ${studyPlan.length}`);
}

function resetStudyPlan() {
    if (confirm('Are you sure you want to reset your study plan? This cannot be undone.')) {
        console.log('Resetting study plan');
        studyPlan = [];
        
        renderTodayProblems();
        renderPendingProblems();
        renderRevisionProblems();
        updateStatusCounts();
        
        saveUserData()
            .then(() => {
                alert('Study plan has been reset successfully.');
            })
            .catch(error => {
                console.error('Failed to save reset study plan:', error);
                alert('There was an error resetting your study plan. Please try again.');
            });
    }
}

function addDebugControls() {
    const plannerTab = document.getElementById('planner-tab');
    if (!plannerTab) return;
    
    if (document.getElementById('debug-controls')) return;
    
    const debugDiv = document.createElement('div');
    debugDiv.id = 'debug-controls';
    debugDiv.style.marginTop = '20px';
    debugDiv.style.padding = '10px';
    debugDiv.style.border = '1px dashed var(--border)';
    debugDiv.style.borderRadius = '4px';
    debugDiv.style.backgroundColor = 'var(--bg-tertiary)';
    
    debugDiv.innerHTML = `
        <div style="font-size: 0.8rem; margin-bottom: 10px; color: var(--text-muted);">Troubleshooting Tools</div>
        <div style="display: flex; gap: 10px;">
            <button id="debug-state-btn" class="btn btn-secondary">Log Debug Info</button>
            <button id="reset-plan-btn" class="btn btn-secondary">Reset Study Plan</button>
        </div>
    `;
    
    plannerTab.appendChild(debugDiv);
    
    document.getElementById('debug-state-btn').addEventListener('click', debugState);
    document.getElementById('reset-plan-btn').addEventListener('click', resetStudyPlan);
}
    </script>
</body>
</html>
